{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["const isUndefined = value => value === undefined\n\nconst isNull = value => value === null\n\nconst isObject = value => value === Object(value)\n\nconst isArray = value => Array.isArray(value)\n\nconst isDate = value => value instanceof Date\n\nconst isBlob = value =>\n  value &&\n  typeof value.size === 'number' &&\n  typeof value.type === 'string' &&\n  typeof value.slice === 'function'\n\nconst isFile = value =>\n  isBlob(value) &&\n  typeof value.name === 'string' &&\n  (typeof value.lastModifiedDate === 'object' ||\n    typeof value.lastModified === 'number')\n\nconst objectToFormData = (obj, cfg, fd, pre) => {\n  cfg = cfg || {}\n  cfg.indices = isUndefined(cfg.indices) ? false : cfg.indices\n  cfg.nullsAsUndefineds = isUndefined(cfg.nullsAsUndefineds) ? false : cfg.nullsAsUndefineds\n  fd = fd || new FormData()\n\n  if (isUndefined(obj)) {\n    return fd\n  } else if (isNull(obj)) {\n    if (!cfg.nullsAsUndefineds) {\n      fd.append(pre, '')\n    }\n  } else if (isArray(obj)) {\n    if (!obj.length) {\n      const key = pre + '[]'\n\n      fd.append(key, '')\n    } else {\n      obj.forEach((value, index) => {\n        const key = pre + '[' + (cfg.indices ? index : '') + ']'\n\n        objectToFormData(value, cfg, fd, key)\n      })\n    }\n  } else if (isDate(obj)) {\n    fd.append(pre, obj.toISOString())\n  } else if (isObject(obj) && !isFile(obj) && !isBlob(obj)) {\n    Object.keys(obj).forEach(prop => {\n      const value = obj[prop]\n\n      if (isArray(value)) {\n        while (prop.length > 2 && prop.lastIndexOf('[]') === prop.length - 2) {\n          prop = prop.substring(0, prop.length - 2)\n        }\n      }\n\n      const key = pre ? pre + '[' + prop + ']' : prop\n\n      objectToFormData(value, cfg, fd, key)\n    })\n  } else {\n    fd.append(pre, obj)\n  }\n\n  return fd\n}\n\nexport default objectToFormData\n"],"names":["isUndefined","value","undefined","isArray","Array","isBlob","size","type","slice","objectToFormData","obj","cfg","fd","pre","indices","nullsAsUndefineds","FormData","append","length","forEach","index","key","Date","isDate","Object","isObject","name","_typeof","lastModifiedDate","lastModified","isFile","keys","prop","lastIndexOf","substring","toISOString"],"mappings":"qOAAA,IAAMA,EAAc,SAAAC,eAAmBC,IAAVD,GAMvBE,EAAU,SAAAF,UAASG,MAAMD,QAAQF,IAIjCI,EAAS,SAAAJ,UACbA,GACsB,iBAAfA,EAAMK,MACS,iBAAfL,EAAMM,MACU,mBAAhBN,EAAMO,sBAQU,SAAnBC,EAAoBC,EAAKC,EAAKC,EAAIC,OACtCF,EAAMA,GAAO,IACTG,SAAUd,EAAYW,EAAIG,UAAmBH,EAAIG,QACrDH,EAAII,mBAAoBf,EAAYW,EAAII,oBAA6BJ,EAAII,kBACzEH,EAAKA,GAAM,IAAII,SAEXhB,EAAYU,UACPE,EACF,GA5ByB,OA4BdF,EACXC,EAAII,mBACPH,EAAGK,OAAOJ,EAAK,SAEZ,GAAIV,EAAQO,MACZA,EAAIQ,OAKPR,EAAIS,SAAQ,SAAClB,EAAOmB,OACZC,EAAMR,EAAM,KAAOF,EAAIG,QAAUM,EAAQ,IAAM,IAErDX,EAAiBR,EAAOU,EAAKC,EAAIS,UARpB,KACTA,EAAMR,EAAM,KAElBD,EAAGK,OAAOI,EAAK,SA9BN,SAAApB,UAASA,aAAiBqB,KAsC5BC,CAAOb,IA1CH,SAAAT,UAASA,IAAUuB,OAAOvB,GA4C9BwB,CAASf,IAhCP,SAAAT,UACbI,EAAOJ,IACe,iBAAfA,EAAMyB,OACsB,WAAlCC,EAAO1B,EAAM2B,mBACkB,iBAAvB3B,EAAM4B,cA4BcC,CAAOpB,IAASL,EAAOK,GAelDE,EAAGK,OAAOJ,EAAKH,GAdfc,OAAOO,KAAKrB,GAAKS,SAAQ,SAAAa,OACjB/B,EAAQS,EAAIsB,MAEd7B,EAAQF,QACH+B,EAAKd,OAAS,GAAKc,EAAKC,YAAY,QAAUD,EAAKd,OAAS,GACjEc,EAAOA,EAAKE,UAAU,EAAGF,EAAKd,OAAS,GAM3CT,EAAiBR,EAAOU,EAAKC,EAFjBC,EAAMA,EAAM,IAAMmB,EAAO,IAAMA,MAX7CpB,EAAGK,OAAOJ,EAAKH,EAAIyB,sBAmBdvB"}