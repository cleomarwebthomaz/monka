{"ast":null,"code":"var _jsxFileName = \"/Users/webthomaz/Desktop/Desenvolvimento/m/monka/monka-api/next/components/Cart/index.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { ButtonGroup, ListGroup, Form, Spinner, Row, Col, Image, Card, Button } from 'react-bootstrap';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Link from 'next/link';\nimport currency from '../../utils/currency';\nimport { showCart, loadCart } from '../../store/actions/cart';\nimport { get, patch, httpDelete } from '../../services/http';\nimport './styles.scss';\n\nfunction Cart() {\n  const {\n    0: addresses,\n    1: setAddresses\n  } = useState([]);\n  const {\n    0: addressSelected,\n    1: setAddressSelected\n  } = useState({});\n  const dispatch = useDispatch();\n  const {\n    isLogged\n  } = useSelector(state => state.auth);\n  const {\n    show,\n    cart,\n    loading\n  } = useSelector(state => state.cart);\n  useEffect(() => {\n    const groups = [];\n    cart.products.map(cartProduct => {\n      if (cartProduct.options) {\n        const options = cartProduct.options;\n        cartProduct.options.map(productOption => {\n          group.options = options;\n          groups.push(productOption.group);\n        });\n      }\n    });\n    console.log(groups, Math.random());\n  }, [cart.products]);\n  useEffect(() => {\n    async function getAddresses() {\n      const result = await get('/myAddress');\n\n      if (!addressSelected.id) {\n        const addressDefault = result.find(item => item.is_default);\n        setAddressSelected(addressDefault);\n      }\n\n      setAddresses(result);\n    }\n\n    if (isLogged) getAddresses();\n  }, [isLogged]);\n\n  async function deleteItem(cartProduct) {\n    await httpDelete(`/cart/${cartProduct.cart_id}/product/${cartProduct.id}`);\n    dispatch(loadCart());\n  }\n\n  async function setAddress(address) {\n    setAddressSelected(address);\n    await patch(`/myAddress/set-default/${address.id}`, address);\n    dispatch(loadCart());\n  }\n\n  if (!show) return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  });\n  return __jsx(\"div\", {\n    id: \"block-cart\",\n    className: \"shadow\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"cart-header p-2 d-flex align-items-center border-bottom shadow justify-content-between\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"d-flex align-items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, __jsx(\"h4\", {\n    className: \"m-0 mr-1 text-light text-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Sua sacola\"), \"(\", cart.products.length, \") produto\", cart.products <= 1 ? '' : 's'), __jsx(\"button\", {\n    className: \"btn btn-light rounded-circle\",\n    onClick: () => {\n      dispatch(showCart(false));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"fas fa-times\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }))), __jsx(\"div\", {\n    className: \"body p-4 border-bottom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, cart.products.map(cartProduct => __jsx(Card, {\n    className: \"rounded position-relative mb-4 pt-1 pb-2 item border-0\",\n    key: cartProduct.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, __jsx(Row, {\n    key: cartProduct.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, __jsx(Col, {\n    xs: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, __jsx(Image, {\n    src: cartProduct.product.image_url,\n    className: \"img-fluid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  })), __jsx(Col, {\n    xs: 8,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, __jsx(\"h6\", {\n    className: \"text-primary mb-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, cartProduct.product.name), __jsx(\"b\", {\n    className: \"group-name text-secondary mb-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Tamanho\"), \" \", __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), cartProduct.option && __jsx(\"span\", {\n    className: \"group-value\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, cartProduct.option.name)), __jsx(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }), __jsx(Button, {\n    variant: \"danger\",\n    size: \"sm\",\n    className: \"rounded-circle btn-trash\",\n    onClick: () => {\n      deleteItem(cartProduct);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"fas fa-trash\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  })))))), __jsx(\"div\", {\n    className: \"footer w-100 pt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"addresses ml-3 mr-3 mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, addresses.length > 1 && addresses.map(address => __jsx(Form.Group, {\n    key: address.id,\n    controlId: `address-${address.id}`,\n    className: \"mb-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, __jsx(Form.Check, {\n    type: \"radio\",\n    value: address.id,\n    checked: addressSelected.id === address.id,\n    label: `\n                                    ${address.street}, ${address.number} - \n                                    ${address.neighborhood.name} \n                                `,\n    onChange: () => setAddress(address),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  })))), __jsx(ListGroup, {\n    className: \"shadow ml-3 mr-3 mb-4 border-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, __jsx(ListGroup.Item, {\n    className: \"d-flex justify-content-between\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"Total de Items\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, loading ? __jsx(Spinner, {\n    animation: \"border\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }) : currency(cart.total_products))), __jsx(ListGroup.Item, {\n    className: \"d-flex justify-content-between\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, \"Taxa de Entrega\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, loading ? __jsx(Spinner, {\n    animation: \"border\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }) : currency(cart.shipping))), __jsx(ListGroup.Item, {\n    className: \"d-flex justify-content-between\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, \"Valor total\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, loading ? __jsx(Spinner, {\n    animation: \"border\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }) : currency(cart.total_price)))), __jsx(\"div\", {\n    className: \"d-flex flex-column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, __jsx(ButtonGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"btn btn-light btn-lg rounded-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"Total: \", currency(555)), __jsx(Link, {\n    href: \"/checkout\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    className: \"btn btn-success btn-lg rounded-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"fas fa-shopping-cart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }), __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, \"Finalizar Pedido\")))))));\n}\n\nexport default Cart;","map":{"version":3,"sources":["/Users/webthomaz/Desktop/Desenvolvimento/m/monka/monka-api/next/components/Cart/index.js"],"names":["React","useState","useEffect","ButtonGroup","ListGroup","Form","Spinner","Row","Col","Image","Card","Button","useSelector","useDispatch","Link","currency","showCart","loadCart","get","patch","httpDelete","Cart","addresses","setAddresses","addressSelected","setAddressSelected","dispatch","isLogged","state","auth","show","cart","loading","groups","products","map","cartProduct","options","productOption","group","push","console","log","Math","random","getAddresses","result","id","addressDefault","find","item","is_default","deleteItem","cart_id","setAddress","address","length","product","image_url","name","option","street","number","neighborhood","total_products","shipping","total_price"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ButtonGroup, ListGroup, Form, Spinner, Row, Col, Image, Card, Button } from 'react-bootstrap';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Link from 'next/link';\n\nimport currency from '../../utils/currency';\nimport { showCart, loadCart } from '../../store/actions/cart';\nimport { get, patch, httpDelete } from '../../services/http';\nimport './styles.scss';\n\nfunction Cart() {\n    const [addresses, setAddresses] = useState([]);\n    const [addressSelected, setAddressSelected] = useState({});\n\n    const dispatch = useDispatch();\n    const { isLogged } = useSelector(state => state.auth);\n    const { show, cart, loading } = useSelector(state => state.cart);\n\n    useEffect(() => {\n        const groups = [];\n\n        cart.products.map(cartProduct => {\n            if (cartProduct.options) {\n                const options = cartProduct.options;\n\n                cartProduct.options.map(productOption => {\n                    group.options = options;\n                    groups.push(productOption.group);\n                })\n            }\n        });\n\n        console.log( groups, Math.random() )\n    }, [cart.products]);\n\n    useEffect(() => {\n        async function getAddresses() {\n            const result = await get('/myAddress');\n\n            if (!addressSelected.id) {\n                const addressDefault = result.find(item => item.is_default);\n                setAddressSelected(addressDefault);\n            }\n\n            setAddresses(result);\n        } \n\n        if (isLogged) getAddresses();\n    }, [isLogged]);\n\n    async function deleteItem(cartProduct) {\n        await httpDelete(`/cart/${cartProduct.cart_id}/product/${cartProduct.id}`);\n        dispatch(loadCart());\n    }\n\n    async function setAddress(address) {\n        setAddressSelected(address);\n        await patch(`/myAddress/set-default/${address.id}`, address);\n        dispatch(loadCart());\n    }\n\n    if (!show) return <div />;\n\n    return (\n        <div id=\"block-cart\" className=\"shadow\">\n            <div className=\"cart-header p-2 d-flex align-items-center border-bottom shadow justify-content-between\">\n\n                <div className=\"d-flex align-items-center\">\n                    <h4 className=\"m-0 mr-1 text-light text-primary\">\n                        Sua sacola\n                    </h4>\n                    ({cart.products.length}) produto{cart.products <= 1 ? '' : 's'}\n                </div>\n\n                <button className=\"btn btn-light rounded-circle\"\n                    onClick={() => {\n                        dispatch(showCart(false));\n                    }}\n                >\n                    <i className=\"fas fa-times\"></i>\n                </button>\n            </div>\n\n            <div className=\"body p-4 border-bottom\">\n                {cart.products.map(cartProduct =>\n                    <Card className=\"rounded position-relative mb-4 pt-1 pb-2 item border-0\" key={cartProduct.id}>\n                        <Row key={cartProduct.id}>\n                            <Col xs={4}>\n                                <Image src={cartProduct.product.image_url} className=\"img-fluid\" />\n                            </Col>\n                            <Col xs={8}>\n                                <h6 className=\"text-primary mb-0\">{cartProduct.product.name}</h6>\n                                <b className=\"group-name text-secondary mb-0\">Tamanho</b> <br />\n                                {cartProduct.option && <span className=\"group-value\">{cartProduct.option.name}</span>}\n                            </Col>\n                            \n                            <Col></Col>\n\n                            <Button \n                                variant=\"danger\"\n                                size=\"sm\"\n                                className=\"rounded-circle btn-trash\"\n                                onClick={() => {\n                                    deleteItem(cartProduct);\n                                }}\n                            >\n                                <i className=\"fas fa-trash\"></i>\n                            </Button>\n                        </Row>\n                    </Card>\n                )}\n            </div>\n\n            <div className=\"footer w-100 pt-3\">\n\n                <div className=\"addresses ml-3 mr-3 mb-4\">\n                    {addresses.length > 1 && addresses.map(address => \n                        <Form.Group key={address.id} controlId={`address-${address.id}`} className=\"mb-0\">\n                            <Form.Check \n                                type=\"radio\" \n                                value={address.id}\n                                checked={addressSelected.id === address.id}\n                                label={`\n                                    ${address.street}, ${address.number} - \n                                    ${address.neighborhood.name} \n                                `} \n                                onChange={() => setAddress(address)}\n                            />\n                        </Form.Group>\n                    )}                    \n                </div>\n\n                <ListGroup className=\"shadow ml-3 mr-3 mb-4 border-0\">\n                    <ListGroup.Item className=\"d-flex justify-content-between\">\n                        <div>\n                            Total de Items \n                        </div>\n                        <div>\n                            {loading ? <Spinner animation=\"border\" /> : currency(cart.total_products)}\n                        </div>\n                    </ListGroup.Item>\n                    <ListGroup.Item className=\"d-flex justify-content-between\">\n                        <div>\n                            Taxa de Entrega \n                        </div>\n                        <div>\n                            {loading ? <Spinner animation=\"border\" /> : currency(cart.shipping)}\n                        </div>\n                    </ListGroup.Item>\n                    <ListGroup.Item className=\"d-flex justify-content-between\">\n                        <div>\n                            Valor total \n                        </div>\n                        <div>\n                            {loading ? <Spinner animation=\"border\" /> : currency(cart.total_price)}\n                        </div>\n                    </ListGroup.Item>\n                </ListGroup>\n\n                <div className=\"d-flex flex-column\">\n                    <ButtonGroup>\n                        <div className=\"btn btn-light btn-lg rounded-0\">\n                            Total: {currency(555)}\n                        </div>\n                        <Link href=\"/checkout\">\n                            <a className=\"btn btn-success btn-lg rounded-0\">\n                                <i className=\"fas fa-shopping-cart\"></i>\n                                <span>Finalizar Pedido</span>\n                            </a>\n                        </Link>\n                    </ButtonGroup>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}