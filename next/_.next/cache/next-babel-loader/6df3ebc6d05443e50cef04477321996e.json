{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar _jsxFileName = \"/Users/webthomaz/Desktop/Desenvolvimento/m/monka/nps/monka-api/next/components/Cart/index.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { ButtonGroup, ListGroup, Form, Spinner, Row, Col, Image, Card, Button } from 'react-bootstrap';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport { toast } from 'react-toastify';\nimport CheckoutComponent from './Checkout';\nimport Quantity from './Quantity';\nimport Voucher from './Voucher';\nimport currency from '../../utils/currency';\nimport { showCart, loadCart } from '../../store/actions/cart';\nimport { get, patch, httpDelete } from '../../services/http';\nimport './styles.scss';\n\nfunction CartComponent() {\n  var _useState = useState([]),\n      addresses = _useState[0],\n      setAddresses = _useState[1];\n\n  var _useState2 = useState({}),\n      addressSelected = _useState2[0],\n      setAddressSelected = _useState2[1];\n\n  var route = useRouter();\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.auth;\n  }),\n      isLogged = _useSelector.isLogged;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.cart;\n  }),\n      show = _useSelector2.show,\n      cart = _useSelector2.cart,\n      loading = _useSelector2.loading;\n\n  var _useState3 = useState(false),\n      openCheckout = _useState3[0],\n      setOpenCheckout = _useState3[1];\n\n  useEffect(function () {\n    function getAddresses() {\n      var result, addressDefault;\n      return _regeneratorRuntime.async(function getAddresses$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(get('/myAddress'));\n\n            case 2:\n              result = _context.sent;\n\n              if (!(result.length <= 0)) {\n                _context.next = 7;\n                break;\n              }\n\n              toast.warning('Adicione um endereÃ§o para continuar', {\n                position: toast.POSITION.BOTTOM_CENTER\n              });\n              dispatch(showCart(false));\n              return _context.abrupt(\"return\", route.push('/auth/access/register-address'));\n\n            case 7:\n              if (!addressSelected || !addressSelected.id) {\n                addressDefault = result.find(function (item) {\n                  return item.is_default;\n                });\n                setAddressSelected(addressDefault);\n              }\n\n              setAddresses(result);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n\n    if (isLogged && show) getAddresses();\n  }, [isLogged, show]);\n\n  function deleteItem(cartProduct) {\n    return _regeneratorRuntime.async(function deleteItem$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(httpDelete(\"/cart/\".concat(cartProduct.cart_id, \"/product/\").concat(cartProduct.id)));\n\n          case 2:\n            dispatch(loadCart());\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  }\n\n  function setAddress(address) {\n    return _regeneratorRuntime.async(function setAddress$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            setAddressSelected(address);\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(patch(\"/myAddress/set-default/\".concat(address.id), address));\n\n          case 3:\n            dispatch(loadCart());\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  }\n\n  function deleteItem(cartProduct) {\n    return _regeneratorRuntime.async(function deleteItem$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return _regeneratorRuntime.awrap(httpDelete(\"/cart/\".concat(cart.id, \"/product/\").concat(cartProduct.id)));\n\n          case 2:\n            dispatch(loadCart());\n\n          case 3:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    });\n  }\n\n  if (!show) return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  });\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    onClick: function onClick() {\n      return dispatch(showCart(false));\n    },\n    className: \"cart-mask\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), __jsx(CheckoutComponent, {\n    show: openCheckout && cart.products.length > 0,\n    onHide: function onHide() {\n      return setOpenCheckout();\n    },\n    addressSelected: addressSelected,\n    addresses: addresses,\n    cart: cart,\n    cartLoading: loading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    id: \"block-cart\",\n    className: \"shadow animated fadeInRight faster\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"cart-header p-2 d-flex align-items-center border-bottom shadow justify-content-between\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"d-flex align-items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, __jsx(\"h4\", {\n    className: \"m-0 mr-1 text-light text-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"Minha sacola\"), \"(\", cart.products.length, \") produto\", cart.products <= 1 ? '' : 's'), __jsx(\"button\", {\n    className: \"btn btn-light rounded-circle\",\n    onClick: function onClick() {\n      return dispatch(showCart(false));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"fas fa-times\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }))), __jsx(\"div\", {\n    className: \"body p-4 border-bottom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, cart.products.length <= 0 && __jsx(\"div\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"Sua sacola est\\xE1 vazia\"), __jsx(\"div\", {\n    className: \"mt-5 empty-icon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"far fa-frown-open\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }))), cart.products.map(function (cartProduct) {\n    return __jsx(\"div\", {\n      key: cartProduct.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, __jsx(Card, {\n      className: \"rounded position-relative mb-4 pt-1 pb-2 item border-0\",\n      key: cartProduct.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, __jsx(Row, {\n      key: cartProduct.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, __jsx(Col, {\n      xs: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, __jsx(Image, {\n      src: cartProduct.product.image_url,\n      className: \"img-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), __jsx(\"div\", {\n      className: \"d-block d-sm-none\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, __jsx(Quantity, {\n      cartProduct: cartProduct,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }))), __jsx(Col, {\n      xs: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, __jsx(\"h6\", {\n      className: \"text-primary mb-0 mt-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, cartProduct.product.name), __jsx(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, cartProduct.observation), __jsx(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, __jsx(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, __jsx(\"b\", {\n      className: \"group-name text-secondary mb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Tamanho\")), cartProduct.option && __jsx(\"div\", {\n      className: \"group-value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, cartProduct.option.name)), __jsx(Col, {\n      sm: 6,\n      className: \"pr-5 mt-4 mt-sm-0 d-none d-sm-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, __jsx(Quantity, {\n      cartProduct: cartProduct,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }))), __jsx(Row, {\n      className: \"p-0 groups\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, cartProduct.groups.map(function (group) {\n      return __jsx(Col, {\n        xs: 6,\n        key: group.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, __jsx(ListGroup, {\n        className: \"mb-2 list-groups\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, __jsx(ListGroup.Item, {\n        className: \"p-0 m-0 border-0 group-option\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, group.name), group.options.map(function (groupOption) {\n        return __jsx(ListGroup.Item, {\n          className: \"p-0 m-0 border-0 group-option-name\",\n          key: groupOption.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, \"- \", groupOption.option.name, \" +\", __jsx(\"span\", {\n          className: \"text-muted\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, currency(groupOption.option.price)));\n      })));\n    }))), __jsx(Button, {\n      variant: \"danger\",\n      size: \"sm\",\n      className: \"rounded-circle btn-trash\",\n      onClick: function onClick() {\n        deleteItem(cartProduct);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, __jsx(\"i\", {\n      className: \"fas fa-trash\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    })))));\n  }), cart.products.length > 0 && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"addresses ml-3 mr-3 mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, addresses.map(function (address) {\n    return __jsx(Form.Group, {\n      key: address.id,\n      controlId: \"address-\".concat(address.id),\n      className: \"mb-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, __jsx(Form.Check, {\n      type: \"radio\",\n      value: address.id,\n      checked: addressSelected && addressSelected.id === address.id,\n      label: \"\\n                                    \".concat(address.street, \", \").concat(address.number, \" - \\n                                    \").concat(address.neighborhood.name, \" \\n                                \"),\n      onChange: function onChange() {\n        return setAddress(address);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }));\n  })), __jsx(Voucher, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }), __jsx(ListGroup, {\n    className: \"shadow ml-3 mr-3 mb-4 border-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, __jsx(ListGroup.Item, {\n    className: \"d-flex justify-content-between\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, \"Total de Items\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, loading ? __jsx(Spinner, {\n    animation: \"border\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }) : currency(cart.total_products))), __jsx(ListGroup.Item, {\n    className: \"d-flex justify-content-between\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, \"Desconto\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, loading && __jsx(Spinner, {\n    animation: \"border\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }), \"- \", !loading && currency(cart.discount))), __jsx(ListGroup.Item, {\n    className: \"d-flex justify-content-between\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, \"Taxa de Entrega\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }, loading ? __jsx(Spinner, {\n    animation: \"border\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }) : currency(cart.shipping)))))), __jsx(\"div\", {\n    className: \"footer w-100 pt-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"d-flex flex-column\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, __jsx(ButtonGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"btn btn-light btn-lg rounded-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, \"Total: \", currency(cart.total_price)), __jsx(\"button\", {\n    className: \"btn btn-success btn-lg rounded-0\",\n    onClick: function onClick() {\n      return setOpenCheckout(true);\n    },\n    disabled: cart.products.length <= 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222\n    },\n    __self: this\n  }, \"Finalizar Pedido\", __jsx(\"i\", {\n    className: \"fas fa-chevron-right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228\n    },\n    __self: this\n  })))))));\n}\n\nexport default CartComponent;","map":{"version":3,"sources":["/Users/webthomaz/Desktop/Desenvolvimento/m/monka/nps/monka-api/next/components/Cart/index.js"],"names":["React","useState","useEffect","ButtonGroup","ListGroup","Form","Spinner","Row","Col","Image","Card","Button","useSelector","useDispatch","useRouter","toast","CheckoutComponent","Quantity","Voucher","currency","showCart","loadCart","get","patch","httpDelete","CartComponent","addresses","setAddresses","addressSelected","setAddressSelected","route","dispatch","state","auth","isLogged","cart","show","loading","openCheckout","setOpenCheckout","getAddresses","result","length","warning","position","POSITION","BOTTOM_CENTER","push","id","addressDefault","find","item","is_default","deleteItem","cartProduct","cart_id","setAddress","address","products","map","product","image_url","name","observation","option","groups","group","options","groupOption","price","street","number","neighborhood","total_products","discount","shipping","total_price"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ButtonGroup, ListGroup, Form, Spinner, Row, Col, Image, Card, Button } from 'react-bootstrap';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport { toast } from 'react-toastify';\n\nimport CheckoutComponent from './Checkout';\nimport Quantity from './Quantity';\nimport Voucher from './Voucher';\n\nimport currency from '../../utils/currency';\nimport { showCart, loadCart } from '../../store/actions/cart';\nimport { get, patch, httpDelete } from '../../services/http';\nimport './styles.scss';\n\nfunction CartComponent() {\n    const [addresses, setAddresses] = useState([]);\n    const [addressSelected, setAddressSelected] = useState({});\n\n    const route = useRouter();\n    const dispatch = useDispatch();\n    const { isLogged } = useSelector(state => state.auth);\n    const { show, cart, loading } = useSelector(state => state.cart);\n    const [openCheckout, setOpenCheckout] = useState(false);\n\n    useEffect(() => {\n        async function getAddresses() {\n            const result = await get('/myAddress');\n\n            if (result.length <= 0) {\n                toast.warning('Adicione um endereÃ§o para continuar', { position: toast.POSITION.BOTTOM_CENTER });\n\n                dispatch(showCart(false));\n                return route.push('/auth/access/register-address')\n            }\n\n            if (!addressSelected || !addressSelected.id) {\n                const addressDefault = result.find(item => item.is_default);\n                setAddressSelected(addressDefault);\n            }\n\n            setAddresses(result);\n        } \n\n        if (isLogged && show) getAddresses();\n    }, [isLogged, show]);\n\n    async function deleteItem(cartProduct) {\n        await httpDelete(`/cart/${cartProduct.cart_id}/product/${cartProduct.id}`);\n        dispatch(loadCart());\n    }\n\n    async function setAddress(address) {\n        setAddressSelected(address);\n        await patch(`/myAddress/set-default/${address.id}`, address);\n        dispatch(loadCart());\n    }\n  \n    async function deleteItem(cartProduct) {\n      await httpDelete(`/cart/${cart.id}/product/${cartProduct.id}`);\n      dispatch(loadCart());\n    }    \n\n    if (!show) return <div />;\n\n    return (\n        <>\n        <div onClick={() => dispatch(showCart(false)) } className=\"cart-mask\"></div>\n\n        <CheckoutComponent\n            show={openCheckout && cart.products.length > 0}\n            onHide={() => setOpenCheckout()}\n            addressSelected={addressSelected}\n            addresses={addresses}\n            cart={cart}\n            cartLoading={loading}\n        />\n        \n        <div id=\"block-cart\" className=\"shadow animated fadeInRight faster\">\n            <div className=\"cart-header p-2 d-flex align-items-center border-bottom shadow justify-content-between\">\n\n                <div className=\"d-flex align-items-center\">\n                    <h4 className=\"m-0 mr-1 text-light text-primary\">Minha sacola</h4>\n                    ({cart.products.length}) produto{cart.products <= 1 ? '' : 's'}\n                </div>\n\n                <button className=\"btn btn-light rounded-circle\" onClick={() => dispatch(showCart(false)) }>\n                    <i className=\"fas fa-times\"></i>\n                </button>\n            </div>\n\n            <div className=\"body p-4 border-bottom\">\n\n                {cart.products.length <= 0 && \n                    <div className=\"text-center\"> \n                        <h1>Sua sacola estÃ¡ vazia</h1>\n                        <div className=\"mt-5 empty-icon\">\n                            <i className=\"far fa-frown-open\"></i>\n                        </div>\n                    </div>\n                }\n\n                {cart.products.map(cartProduct =>\n                <div key={cartProduct.id}>\n                    <Card className=\"rounded position-relative mb-4 pt-1 pb-2 item border-0\" key={cartProduct.id}>\n                        <Row key={cartProduct.id}>\n                            <Col xs={4}>\n                                <Image src={cartProduct.product.image_url} className=\"img-fluid\" />\n                                <div className=\"d-block d-sm-none\">\n                                    <Quantity cartProduct={cartProduct} />\n                                </div>\n                            </Col>\n\n                            <Col xs={8}>\n                                <h6 className=\"text-primary mb-0 mt-3\">{cartProduct.product.name}</h6>\n                                <strong>{cartProduct.observation}</strong>\n                                <Row>\n                                    <Col>\n                                        <div><b className=\"group-name text-secondary mb-0\">Tamanho</b></div>\n                                        {cartProduct.option && <div className=\"group-value\">{cartProduct.option.name}</div>}\n                                    </Col>\n                                    <Col sm={6} className=\"pr-5 mt-4 mt-sm-0 d-none d-sm-block\">\n                                       <Quantity cartProduct={cartProduct} />\n                                    </Col>\n                                </Row>\n\n                                <Row className=\"p-0 groups\">\n                                    {cartProduct.groups.map(group => \n                                        <Col xs={6} key={group.id}>\n                                            <ListGroup className=\"mb-2 list-groups\">\n                                                <ListGroup.Item className=\"p-0 m-0 border-0 group-option\">\n                                                    {group.name}\n                                                </ListGroup.Item>\n\n                                                {group.options.map(groupOption => \n                                                    <ListGroup.Item className=\"p-0 m-0 border-0 group-option-name\" key={groupOption.id}>\n                                                        - {groupOption.option.name} + \n                                                        <span className=\"text-muted\">{currency(groupOption.option.price)}</span>\n                                                    </ListGroup.Item>\n                                                )}\n                                            </ListGroup>\n                                        </Col>\n                                    )}\n                                </Row>                                \n                            </Col>\n\n                            <Button \n                                variant=\"danger\"\n                                size=\"sm\"\n                                className=\"rounded-circle btn-trash\"\n                                onClick={() => {\n                                    deleteItem(cartProduct);\n                                }}\n                            >\n                                <i className=\"fas fa-trash\"></i>\n                            </Button>\n                        </Row>\n                    </Card>                  \n                </div>\n                )}\n\n                {cart.products.length > 0 &&\n                <>\n                <div className=\"addresses ml-3 mr-3 mb-4\">\n                    {addresses.map(address => \n                        <Form.Group key={address.id} controlId={`address-${address.id}`} className=\"mb-0\">\n                            <Form.Check \n                                type=\"radio\" \n                                value={address.id}\n                                checked={addressSelected && addressSelected.id === address.id}\n                                label={`\n                                    ${address.street}, ${address.number} - \n                                    ${address.neighborhood.name} \n                                `} \n                                onChange={() => setAddress(address)}\n                            />\n                        </Form.Group>\n                    )}                    \n                </div>\n\n                <Voucher />\n\n                <ListGroup className=\"shadow ml-3 mr-3 mb-4 border-0\">\n                    <ListGroup.Item className=\"d-flex justify-content-between\">\n                        <div>\n                            Total de Items \n                        </div>\n                        <div>\n                            {loading ? <Spinner animation=\"border\" /> : currency(cart.total_products)}\n                        </div>\n                    </ListGroup.Item>\n                    <ListGroup.Item className=\"d-flex justify-content-between\">\n                        <div>\n                            Desconto\n                        </div>\n                        <div>\n                            {loading && <Spinner animation=\"border\" />}\n                            - {!loading && currency(cart.discount)}\n                        </div>\n                    </ListGroup.Item>                    \n                    <ListGroup.Item className=\"d-flex justify-content-between\">\n                        <div>\n                            Taxa de Entrega \n                        </div>\n                        <div>\n                            {loading ? <Spinner animation=\"border\" /> : currency(cart.shipping)}\n                        </div>\n                    </ListGroup.Item>\n                </ListGroup>  \n                </>\n                }\n            </div>\n\n            <div className=\"footer w-100 pt-3\">\n\n                <div className=\"d-flex flex-column\">\n                    <ButtonGroup>\n                        <div className=\"btn btn-light btn-lg rounded-0\">\n                            Total: {currency(cart.total_price)}\n                        </div>\n\n                        <button className=\"btn btn-success btn-lg rounded-0\" \n                            onClick={() => \n                            setOpenCheckout(true)} \n                            disabled={cart.products.length <= 0}\n                        >\n                            Finalizar Pedido  \n                            <i className=\"fas fa-chevron-right\"></i> \n                        </button>\n\n                    </ButtonGroup>\n                </div>\n            </div>\n        </div>\n        </>\n    );\n}\n\nexport default CartComponent;\n"]},"metadata":{},"sourceType":"module"}