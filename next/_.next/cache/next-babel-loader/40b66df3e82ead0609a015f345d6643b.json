{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport nextCookie from 'next-cookies';\nimport cookie from \"js-cookie\";\nimport * as cartActions from '../types/cart';\nimport * as authActions from '../types/auth';\nexport var authLogout = function authLogout() {\n  return function _callee(dispatch) {\n    var token, user;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            token = cookie.remove('token');\n            user = cookie.remove('user');\n            dispatch({\n              type: authActions.LOGOUT\n            });\n            dispatch({\n              type: cartActions.RESET_CART\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n};\nexport var loginStorage = function loginStorage() {\n  return function _callee2(dispatch) {\n    var token, user;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            token = cookie.get('token');\n            user = cookie.get('user');\n\n            if (user && token) {\n              dispatch({\n                type: authActions.SET_USER,\n                payload: JSON.parse(user)\n              });\n              dispatch({\n                type: authActions.SET_TOKEN,\n                payload: token\n              });\n            }\n\n            dispatch({\n              type: authActions.SET_LOADED,\n              payload: true\n            });\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n};\nexport var setUser = function setUser(data) {\n  return function _callee3(dispatch) {\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (data.token) {\n              cookie.set('token', data.token);\n            }\n\n            cookie.set('user', _JSON$stringify(data.user));\n            dispatch({\n              type: authActions.SET_USER,\n              payload: data.user\n            });\n            dispatch({\n              type: authActions.SET_LOADED,\n              payload: true\n            });\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  };\n};\nexport var setUserData = function setUserData(data) {\n  return function _callee4(dispatch) {\n    return _regeneratorRuntime.async(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            cookie.set('user', _JSON$stringify(data));\n            dispatch({\n              type: authActions.SET_USER,\n              payload: data\n            });\n\n          case 2:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    });\n  };\n};\nexport var setToken = function setToken(token) {\n  return function _callee5(dispatch) {\n    return _regeneratorRuntime.async(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            cookie.set('token', token);\n            dispatch({\n              type: authActions.SET_TOKEN,\n              payload: token\n            });\n\n          case 2:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    });\n  };\n};\nexport var logout = function logout() {\n  return function _callee6(dispatch) {\n    return _regeneratorRuntime.async(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            cookie.remove('token');\n            cookie.remove('user');\n            dispatch({\n              type: authActions.LOGOUT\n            });\n\n          case 3:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    });\n  };\n};","map":{"version":3,"sources":["/Users/webthomaz/Desktop/Desenvolvimento/m/monka/nps/monka-api/next/store/actions/auth.js"],"names":["nextCookie","cookie","cartActions","authActions","authLogout","dispatch","token","remove","user","type","LOGOUT","RESET_CART","loginStorage","get","SET_USER","payload","JSON","parse","SET_TOKEN","SET_LOADED","setUser","data","set","setUserData","setToken","logout"],"mappings":";;AAAA,OAAOA,UAAP,MAAuB,cAAvB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,OAAO,KAAKC,WAAZ,MAA6B,eAA7B;AACA,OAAO,KAAKC,WAAZ,MAA6B,eAA7B;AAEA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAW;AACjC,SAAO,iBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACGC,YAAAA,KADH,GACWL,MAAM,CAACM,MAAP,CAAc,OAAd,CADX;AAEGC,YAAAA,IAFH,GAEUP,MAAM,CAACM,MAAP,CAAc,MAAd,CAFV;AAGHF,YAAAA,QAAQ,CAAC;AAAEI,cAAAA,IAAI,EAAEN,WAAW,CAACO;AAApB,aAAD,CAAR;AACAL,YAAAA,QAAQ,CAAC;AAAEI,cAAAA,IAAI,EAAEP,WAAW,CAACS;AAApB,aAAD,CAAR;;AAJG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAP;AAMH,CAPM;AASP,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,GAAW;AACnC,SAAO,kBAAMP,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAEGC,YAAAA,KAFH,GAEWL,MAAM,CAACY,GAAP,CAAW,OAAX,CAFX;AAGGL,YAAAA,IAHH,GAGUP,MAAM,CAACY,GAAP,CAAW,MAAX,CAHV;;AAKH,gBAAIL,IAAI,IAAIF,KAAZ,EAAmB;AACfD,cAAAA,QAAQ,CAAC;AAAEI,gBAAAA,IAAI,EAAEN,WAAW,CAACW,QAApB;AAA8BC,gBAAAA,OAAO,EAAEC,IAAI,CAACC,KAAL,CAAWT,IAAX;AAAvC,eAAD,CAAR;AACAH,cAAAA,QAAQ,CAAC;AAAEI,gBAAAA,IAAI,EAAEN,WAAW,CAACe,SAApB;AAA+BH,gBAAAA,OAAO,EAAET;AAAxC,eAAD,CAAR;AACH;;AAEDD,YAAAA,QAAQ,CAAC;AAAEI,cAAAA,IAAI,EAAEN,WAAW,CAACgB,UAApB;AAAgCJ,cAAAA,OAAO,EAAE;AAAzC,aAAD,CAAR;;AAVG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAP;AAYH,CAbM;AAeP,OAAO,IAAMK,OAAO,GAAG,SAAVA,OAAU,CAASC,IAAT,EAAe;AAClC,SAAO,kBAAMhB,QAAN;AAAA;AAAA;AAAA;AAAA;AACH,gBAAIgB,IAAI,CAACf,KAAT,EAAgB;AACZL,cAAAA,MAAM,CAACqB,GAAP,CAAW,OAAX,EAAoBD,IAAI,CAACf,KAAzB;AACH;;AAEDL,YAAAA,MAAM,CAACqB,GAAP,CAAW,MAAX,EAAmB,gBAAeD,IAAI,CAACb,IAApB,CAAnB;AAEAH,YAAAA,QAAQ,CAAC;AAAEI,cAAAA,IAAI,EAAEN,WAAW,CAACW,QAApB;AAA8BC,cAAAA,OAAO,EAAEM,IAAI,CAACb;AAA5C,aAAD,CAAR;AACAH,YAAAA,QAAQ,CAAC;AAAEI,cAAAA,IAAI,EAAEN,WAAW,CAACgB,UAApB;AAAgCJ,cAAAA,OAAO,EAAE;AAAzC,aAAD,CAAR;;AARG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAP;AAUH,CAXM;AAaP,OAAO,IAAMQ,WAAW,GAAG,SAAdA,WAAc,CAASF,IAAT,EAAe;AACtC,SAAO,kBAAMhB,QAAN;AAAA;AAAA;AAAA;AAAA;AACHJ,YAAAA,MAAM,CAACqB,GAAP,CAAW,MAAX,EAAmB,gBAAeD,IAAf,CAAnB;AACAhB,YAAAA,QAAQ,CAAC;AAAEI,cAAAA,IAAI,EAAEN,WAAW,CAACW,QAApB;AAA8BC,cAAAA,OAAO,EAAEM;AAAvC,aAAD,CAAR;;AAFG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAP;AAIH,CALM;AAOP,OAAO,IAAMG,QAAQ,GAAG,SAAXA,QAAW,CAASlB,KAAT,EAAgB;AACpC,SAAO,kBAAMD,QAAN;AAAA;AAAA;AAAA;AAAA;AACHJ,YAAAA,MAAM,CAACqB,GAAP,CAAW,OAAX,EAAoBhB,KAApB;AACAD,YAAAA,QAAQ,CAAC;AAAEI,cAAAA,IAAI,EAAEN,WAAW,CAACe,SAApB;AAA+BH,cAAAA,OAAO,EAAET;AAAxC,aAAD,CAAR;;AAFG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAP;AAIH,CALM;AAOP,OAAO,IAAMmB,MAAM,GAAG,SAATA,MAAS,GAAM;AACxB,SAAO,kBAAMpB,QAAN;AAAA;AAAA;AAAA;AAAA;AACHJ,YAAAA,MAAM,CAACM,MAAP,CAAc,OAAd;AACAN,YAAAA,MAAM,CAACM,MAAP,CAAc,MAAd;AACAF,YAAAA,QAAQ,CAAC;AAACI,cAAAA,IAAI,EAAEN,WAAW,CAACO;AAAnB,aAAD,CAAR;;AAHG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAP;AAKH,CANM","sourcesContent":["import nextCookie from 'next-cookies';\nimport cookie from \"js-cookie\";\n\nimport * as cartActions from '../types/cart';\nimport * as authActions from '../types/auth';\n\nexport const authLogout = function() {\n    return async dispatch => {\n        const token = cookie.remove('token');\n        const user = cookie.remove('user');\n        dispatch({ type: authActions.LOGOUT });\n        dispatch({ type: cartActions.RESET_CART });\n    }\n}\n\nexport const loginStorage = function() {\n    return async dispatch => {\n\n        const token = cookie.get('token');\n        const user = cookie.get('user');\n\n        if (user && token) {\n            dispatch({ type: authActions.SET_USER, payload: JSON.parse(user) });\n            dispatch({ type: authActions.SET_TOKEN, payload: token });\n        }\n\n        dispatch({ type: authActions.SET_LOADED, payload: true });\n    }\n}\n\nexport const setUser = function(data) {\n    return async dispatch => {\n        if (data.token) {\n            cookie.set('token', data.token);\n        }\n\n        cookie.set('user', JSON.stringify(data.user));\n\n        dispatch({ type: authActions.SET_USER, payload: data.user });\n        dispatch({ type: authActions.SET_LOADED, payload: true });\n    }\n}\n\nexport const setUserData = function(data) {\n    return async dispatch => {\n        cookie.set('user', JSON.stringify(data));\n        dispatch({ type: authActions.SET_USER, payload: data });\n    }\n}\n\nexport const setToken = function(token) {\n    return async dispatch => {\n        cookie.set('token', token);\n        dispatch({ type: authActions.SET_TOKEN, payload: token });\n    }\n}\n\nexport const logout = () => {\n    return async dispatch => {\n        cookie.remove('token');\n        cookie.remove('user');\n        dispatch({type: authActions.LOGOUT});\n    }\n}"]},"metadata":{},"sourceType":"module"}