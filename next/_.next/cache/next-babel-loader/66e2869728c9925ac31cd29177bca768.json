{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar _jsxFileName = \"/Users/webthomaz/Desktop/Desenvolvimento/m/monka/monka-api/next/pages/cart/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Container, Table, Button, Spinner } from 'react-bootstrap';\nimport { useRouter } from 'next/router';\nimport PageTitle from '../../components/PageTitle';\nimport Breadcrumb from '../../components/Breadcrumb';\nimport Checkout from './Checkout';\nimport CartProductDetails from './Product/Details';\nimport currency from '../../utils/currency';\nimport { patch, httpDelete } from '../../services/http';\nimport { addCrumb, clearCrumbs } from '../../store/actions/breadcrumb';\nimport { loadCart } from '../../store/actions/cart';\n\nvar PageCart = function PageCart(props) {\n  return function () {\n    var _useState = useState({}),\n        cartProductActive = _useState[0],\n        setCartProductActive = _useState[1];\n\n    var _useState2 = useState({}),\n        update = _useState2[0],\n        setUpdate = _useState2[1];\n\n    var _useSelector = useSelector(function (state) {\n      return state.cart;\n    }),\n        cart = _useSelector.cart;\n\n    var _useSelector2 = useSelector(function (state) {\n      return state.setting;\n    }),\n        setting = _useSelector2.setting,\n        loaded = _useSelector2.loaded;\n\n    var dispatch = useDispatch();\n    var router = useRouter();\n\n    var _useState3 = useState(false),\n        openCheckout = _useState3[0],\n        setOpenCheckout = _useState3[1];\n\n    useEffect(function () {\n      dispatch(clearCrumbs());\n      dispatch(addCrumb('Meu Carrinho'));\n    }, []);\n\n    function incrementQuantity(cartProduct) {\n      return _regeneratorRuntime.async(function incrementQuantity$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              cartProduct.quantity += 1;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(patch(\"/cart/\".concat(cart.id, \"/product/\").concat(cartProduct.id), {\n                quantity: cartProduct.quantity\n              }));\n\n            case 3:\n              dispatch(loadCart());\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n\n    function decrementQuantity(cartProduct) {\n      return _regeneratorRuntime.async(function decrementQuantity$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              cartProduct.quantity -= 1;\n\n              if (cartProduct.quantity <= 0) {\n                cartProduct.quantity = 1;\n              }\n\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(patch(\"/cart/\".concat(cart.id, \"/product/\").concat(cartProduct.id), {\n                quantity: cartProduct.quantity\n              }));\n\n            case 4:\n              dispatch(loadCart());\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      });\n    }\n\n    function deleteItem(cartProduct) {\n      return _regeneratorRuntime.async(function deleteItem$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(httpDelete(\"/cart/\".concat(cart.id, \"/product/\").concat(cartProduct.id)));\n\n            case 2:\n              dispatch(loadCart());\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      });\n    }\n\n    return __jsx(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, __jsx(Breadcrumb, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }), __jsx(PageTitle, {\n      title: \"Meu Carrinho\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), __jsx(Checkout, {\n      show: openCheckout && cart.products.length > 0,\n      onHide: function onHide() {\n        return setOpenCheckout();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }), __jsx(CartProductDetails, {\n      cartProduct: cartProductActive,\n      show: cartProductActive.id > 0,\n      onHide: function onHide() {\n        return setCartProductActive({});\n      },\n      onUpdate: function onUpdate(data) {\n        updateCartProduct(data);\n        setUpdate({\n          data: data\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), !cart.id && __jsx(Spinner, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), cart.id && __jsx(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, __jsx(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, __jsx(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, __jsx(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Produto\"), __jsx(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Pre\\xE7o\"), __jsx(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"Quantidade\"), __jsx(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Total\"), __jsx(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }))), __jsx(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, cart.products.map(function (cartProduct) {\n      return __jsx(\"tr\", {\n        key: cartProduct.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, __jsx(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, cartProduct.product.name, cartProduct.option && cartProduct.option.name), __jsx(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, currency(cartProduct.price_unity)), __jsx(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, currency(cartProduct.total_price)), __jsx(\"td\", {\n        className: \"d-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, __jsx(Button, {\n        className: \"btn-quantity left btn-sm\",\n        onClick: function onClick() {\n          decrementQuantity(cartProduct);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, __jsx(\"i\", {\n        className: \"fas fa-minus-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        className: \"quantity btn btn-sm bg-light border-sm pl-3 pr-3 rounded-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, cartProduct.quantity), __jsx(Button, {\n        className: \"btn-quantity right btn-sm\",\n        onClick: function onClick() {\n          incrementQuantity(cartProduct);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, __jsx(\"i\", {\n        className: \"fas fa-plus-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }))), __jsx(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, __jsx(Button, {\n        size: \"sm\",\n        onClick: function onClick() {\n          return setCartProductActive(cartProduct);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, __jsx(\"i\", {\n        className: \"fas fa-eye\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      })), __jsx(Button, {\n        size: \"sm\",\n        variant: \"danger\",\n        className: \"ml-2\",\n        onClick: function onClick() {\n          return deleteItem(cartProduct);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, __jsx(\"i\", {\n        className: \"fas fa-trash\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }))));\n    }), __jsx(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, __jsx(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), __jsx(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), __jsx(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), __jsx(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), __jsx(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, __jsx(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"Total:\"), currency(cart.total_price))))), __jsx(\"div\", {\n      className: \"mt-5 d-flex justify-content-between\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, __jsx(Link, {\n      href: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      className: \"btn btn-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, __jsx(\"i\", {\n      className: \"fas fa-chevron-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), \"Continuar Comprando\")), setting.store_status && setting.store_status.value !== \"0\" && __jsx(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: function onClick() {\n        return setOpenCheckout(true);\n      },\n      disabled: cart.products.length <= 0,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"Finalizar Pedido\", __jsx(\"i\", {\n      className: \"fas fa-chevron-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }))));\n  };\n}; // PageCart.getInitialProps = () => {\n//   return {}\n// }\n\n\nexport default PageCart;","map":{"version":3,"sources":["/Users/webthomaz/Desktop/Desenvolvimento/m/monka/monka-api/next/pages/cart/index.js"],"names":["useEffect","useState","Link","useSelector","useDispatch","Container","Table","Button","Spinner","useRouter","PageTitle","Breadcrumb","Checkout","CartProductDetails","currency","patch","httpDelete","addCrumb","clearCrumbs","loadCart","PageCart","props","cartProductActive","setCartProductActive","update","setUpdate","state","cart","setting","loaded","dispatch","router","openCheckout","setOpenCheckout","incrementQuantity","cartProduct","quantity","id","decrementQuantity","deleteItem","products","length","data","updateCartProduct","map","product","name","option","price_unity","total_price","store_status","value"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Container, Table, Button, Spinner } from 'react-bootstrap';\nimport { useRouter } from 'next/router';\n\nimport PageTitle from '../../components/PageTitle';\nimport Breadcrumb from '../../components/Breadcrumb';\n\nimport Checkout from './Checkout';\nimport CartProductDetails from './Product/Details';\n\nimport currency from '../../utils/currency';\nimport { patch, httpDelete } from '../../services/http';\nimport { addCrumb, clearCrumbs } from '../../store/actions/breadcrumb';\nimport { loadCart } from '../../store/actions/cart';\n\nconst PageCart = (props) => () => {\n  const [cartProductActive, setCartProductActive] = useState({});\n  const [update, setUpdate] = useState({});\n  const { cart } = useSelector(state => state.cart);\n  const { setting, loaded } = useSelector(state => state.setting);\n  const dispatch = useDispatch();\n  const router = useRouter();\n\n  const [openCheckout, setOpenCheckout] = useState(false);\n\n  useEffect(() => {\n    dispatch(clearCrumbs());\n    dispatch(addCrumb('Meu Carrinho'));\n  }, []);\n\n  async function incrementQuantity(cartProduct) {\n      cartProduct.quantity += 1;\n\n      await patch(`/cart/${cart.id}/product/${cartProduct.id}`, { quantity: cartProduct.quantity });\n      dispatch(loadCart());\n  }\n\n  async function decrementQuantity(cartProduct) {\n      cartProduct.quantity -= 1;\n\n      if (cartProduct.quantity <= 0) {\n        cartProduct.quantity = 1;\n      }\n\n      await patch(`/cart/${cart.id}/product/${cartProduct.id}`, { quantity: cartProduct.quantity });\n      dispatch(loadCart());\n  }\n\n  async function deleteItem(cartProduct) {\n    await httpDelete(`/cart/${cart.id}/product/${cartProduct.id}`);\n    dispatch(loadCart());\n  }\n\n  return (\n      <Container>\n          <Breadcrumb />\n          <PageTitle title=\"Meu Carrinho\" />\n\n          <Checkout \n            show={openCheckout && cart.products.length > 0}\n            onHide={() => setOpenCheckout()}\n          />\n\n          <CartProductDetails \n            cartProduct={cartProductActive}\n            show={cartProductActive.id > 0}\n            onHide={() => setCartProductActive({})}\n            onUpdate={(data) => {\n              updateCartProduct(data);\n              setUpdate({data});\n            }}\n          />\n\n          {!cart.id && <Spinner /> }\n\n          {cart.id &&\n            <Table striped bordered hover>\n              <thead>\n                <tr>\n                  <th>Produto</th>\n                  <th>Preço</th>\n                  <th>Quantidade</th>\n                  <th>Total</th>\n                  <th></th>\n                </tr>\n              </thead>\n              <tbody>\n                {cart.products.map(cartProduct =>\n                  <tr key={cartProduct.id}>\n                    <td>\n                      {cartProduct.product.name} \n                      {cartProduct.option && cartProduct.option.name}\n                    </td>\n                    <td>{currency(cartProduct.price_unity)}</td>\n                    <td>{currency(cartProduct.total_price)}</td>\n                    <td className=\"d-flex\">\n                        <Button className=\"btn-quantity left btn-sm\" onClick={() => {\n                            decrementQuantity(cartProduct);\n                        }}>\n                            <i className=\"fas fa-minus-circle\"></i>\n                        </Button>\n                        <div className=\"quantity btn btn-sm bg-light border-sm pl-3 pr-3 rounded-0\">\n                            {cartProduct.quantity}\n                        </div>\n                        <Button className=\"btn-quantity right btn-sm\" onClick={() => {\n                            incrementQuantity(cartProduct);\n                        }}>\n                            <i className=\"fas fa-plus-circle\"></i>\n                        </Button>\n                    </td>\n                    <td>\n                      <Button size=\"sm\" onClick={() => setCartProductActive(cartProduct)}>\n                        <i className=\"fas fa-eye\"></i>\n                      </Button>\n                      <Button size=\"sm\" variant=\"danger\" className=\"ml-2\" onClick={() => deleteItem(cartProduct)}>\n                        <i className=\"fas fa-trash\"></i>\n                      </Button>\n                    </td>\n                  </tr>\n               )}\n               <tr>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td></td>\n                <td>\n                  <strong>Total:</strong>\n                  {currency(cart.total_price)}\n                </td>\n               </tr>\n              </tbody>\n            </Table>\n          }\n\n          <div className=\"mt-5 d-flex justify-content-between\">\n            <Link href=\"/\">\n              <a className=\"btn btn-light\">\n                <i className=\"fas fa-chevron-left\"></i> \n                Continuar Comprando  \n              </a>\n            </Link>\n\n            {setting.store_status && setting.store_status.value !== \"0\" &&\n              <button className=\"btn btn-primary\" \n                  onClick={() => \n                  setOpenCheckout(true)} \n                  disabled={cart.products.length <= 0}\n              >\n                Finalizar Pedido  \n                <i className=\"fas fa-chevron-right\"></i> \n              </button>\n            }\n          </div>\n\n\n      </Container>    \n  );\n\n}\n\n// PageCart.getInitialProps = () => {\n//   return {}\n// }\n\nexport default PageCart;\n"]},"metadata":{},"sourceType":"module"}