{"ast":null,"code":"var _jsxFileName = \"/Users/webthomaz/Desktop/Desenvolvimento/m/monka/monka-api/next/pages/components/ProducItem/Groups/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Button, ListGroup, Alert } from 'react-bootstrap';\nimport currency from '../../../../utils/currency';\nimport './styles.scss';\nexport default function ({\n  groups,\n  product,\n  error,\n  onChange\n}) {\n  function enableAndDisabeGroupOptions(group) {\n    const max = group.max;\n    const totalCountGroupQuantities = countGroupQuantities(group);\n\n    if (totalCountGroupQuantities >= max) {\n      group.options.map(op => op.disabled = false);\n      group.options.filter(op => {\n        if (!op.quantity) op.quantity = 0;\n\n        if (op.quantity <= 0) {\n          return op;\n        }\n      }).map(op => {\n        op.disabled = true;\n      });\n    } else {\n      group.options.map(op => op.disabled = false);\n    }\n  }\n\n  const countGroupQuantities = group => {\n    let countQuantities = 0;\n    group.options.filter(i => i.quantity > 0).map(option => {\n      countQuantities += option.quantity;\n    });\n    return countQuantities;\n  };\n\n  function increment(group, option) {\n    if (!option.quantity) option.quantity = 0;\n    const max = group.max;\n    const currentQuantity = option.quantity;\n    let quantity = option.quantity += 1;\n    const countQuantities = countGroupQuantities(group);\n    if (countQuantities > max) quantity = currentQuantity;\n    option.quantity = quantity;\n    enableAndDisabeGroupOptions(group);\n    onChange(product);\n  }\n\n  function decrement(group, option) {\n    if (!option.quantity) option.quantity = 0;\n    option.quantity -= 1;\n\n    if (option.quantity <= 0) {\n      option.quantity = 0;\n    }\n\n    enableAndDisabeGroupOptions(group);\n    onChange(product);\n  }\n\n  if (!groups) return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  });\n  return __jsx(\"div\", {\n    className: \"mt-4 groups\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, groups.map(group => __jsx(\"div\", {\n    key: group.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"bg-light title pt-2 pb-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, __jsx(\"h6\", {\n    className: \"text-uppercase mb-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, group.name), __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, group.description)), error.group_id === group.id && __jsx(Alert, {\n    variant: \"danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, error.message), __jsx(ListGroup, {\n    className: \"mb-4 group-options\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, group.options.map(option => __jsx(ListGroup.Item, {\n    key: option.id,\n    active: option.disabled === true,\n    className: \"d-flex justify-content-between align-items-center\",\n    disabled: option.disabled === true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, option.name, __jsx(\"span\", {\n    className: \"text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"+ \", currency(option.price))), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"d-flex\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, __jsx(Button, {\n    className: \"btn-quantity left btn-sm\",\n    onClick: () => {\n      decrement(group, option);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"fas fa-minus-circle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"quantity btn btn-sm bg-light border-sm pl-3 pr-3 rounded-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, option.quantity || 0), __jsx(Button, {\n    className: \"btn-quantity right btn-sm\",\n    onClick: () => {\n      increment(group, option);\n    },\n    disabled: option.disabled === true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"fas fa-plus-circle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }))))))))));\n}","map":{"version":3,"sources":["/Users/webthomaz/Desktop/Desenvolvimento/m/monka/monka-api/next/pages/components/ProducItem/Groups/index.js"],"names":["Button","ListGroup","Alert","currency","groups","product","error","onChange","enableAndDisabeGroupOptions","group","max","totalCountGroupQuantities","countGroupQuantities","options","map","op","disabled","filter","quantity","countQuantities","i","option","increment","currentQuantity","decrement","id","name","description","group_id","message","price"],"mappings":";;;AAAA,SAASA,MAAT,EAAiBC,SAAjB,EAA4BC,KAA5B,QAAyC,iBAAzC;AAEA,OAAOC,QAAP,MAAqB,4BAArB;AAEA,OAAO,eAAP;AAEA,eAAe,UAAS;AAAEC,EAAAA,MAAF;AAAUC,EAAAA,OAAV;AAAmBC,EAAAA,KAAnB;AAA0BC,EAAAA;AAA1B,CAAT,EAA+C;AAE1D,WAASC,2BAAT,CAAqCC,KAArC,EAA4C;AACxC,UAAMC,GAAG,GAAGD,KAAK,CAACC,GAAlB;AACA,UAAMC,yBAAyB,GAAGC,oBAAoB,CAACH,KAAD,CAAtD;;AAEA,QAAIE,yBAAyB,IAAID,GAAjC,EAAsC;AAClCD,MAAAA,KAAK,CAACI,OAAN,CAAcC,GAAd,CAAkBC,EAAE,IAAIA,EAAE,CAACC,QAAH,GAAc,KAAtC;AAEAP,MAAAA,KAAK,CAACI,OAAN,CAAcI,MAAd,CAAqBF,EAAE,IAAI;AACvB,YAAI,CAACA,EAAE,CAACG,QAAR,EAAkBH,EAAE,CAACG,QAAH,GAAc,CAAd;;AAClB,YAAIH,EAAE,CAACG,QAAH,IAAe,CAAnB,EAAsB;AAClB,iBAAOH,EAAP;AACH;AACJ,OALD,EAKGD,GALH,CAKOC,EAAE,IAAI;AACTA,QAAAA,EAAE,CAACC,QAAH,GAAc,IAAd;AACH,OAPD;AAQH,KAXD,MAWO;AACHP,MAAAA,KAAK,CAACI,OAAN,CAAcC,GAAd,CAAkBC,EAAE,IAAIA,EAAE,CAACC,QAAH,GAAc,KAAtC;AACH;AACJ;;AAED,QAAMJ,oBAAoB,GAAIH,KAAD,IAAW;AACpC,QAAIU,eAAe,GAAG,CAAtB;AACAV,IAAAA,KAAK,CAACI,OAAN,CAAcI,MAAd,CAAqBG,CAAC,IAAIA,CAAC,CAACF,QAAF,GAAa,CAAvC,EAA0CJ,GAA1C,CAA8CO,MAAM,IAAI;AACpDF,MAAAA,eAAe,IAAIE,MAAM,CAACH,QAA1B;AACH,KAFD;AAIA,WAAOC,eAAP;AACH,GAPD;;AASA,WAASG,SAAT,CAAmBb,KAAnB,EAA0BY,MAA1B,EAAkC;AAC9B,QAAI,CAACA,MAAM,CAACH,QAAZ,EAAsBG,MAAM,CAACH,QAAP,GAAkB,CAAlB;AAEtB,UAAMR,GAAG,GAAGD,KAAK,CAACC,GAAlB;AACA,UAAMa,eAAe,GAAGF,MAAM,CAACH,QAA/B;AACA,QAAIA,QAAQ,GAAGG,MAAM,CAACH,QAAP,IAAmB,CAAlC;AAEA,UAAMC,eAAe,GAAGP,oBAAoB,CAACH,KAAD,CAA5C;AAEA,QAAIU,eAAe,GAAGT,GAAtB,EAA2BQ,QAAQ,GAAGK,eAAX;AAE3BF,IAAAA,MAAM,CAACH,QAAP,GAAkBA,QAAlB;AAEAV,IAAAA,2BAA2B,CAACC,KAAD,CAA3B;AACAF,IAAAA,QAAQ,CAACF,OAAD,CAAR;AACH;;AAED,WAASmB,SAAT,CAAmBf,KAAnB,EAA0BY,MAA1B,EAAkC;AAC9B,QAAI,CAACA,MAAM,CAACH,QAAZ,EAAsBG,MAAM,CAACH,QAAP,GAAkB,CAAlB;AACtBG,IAAAA,MAAM,CAACH,QAAP,IAAmB,CAAnB;;AAEA,QAAIG,MAAM,CAACH,QAAP,IAAmB,CAAvB,EAA0B;AACtBG,MAAAA,MAAM,CAACH,QAAP,GAAkB,CAAlB;AACH;;AAEDV,IAAAA,2BAA2B,CAACC,KAAD,CAA3B;AACAF,IAAAA,QAAQ,CAACF,OAAD,CAAR;AACH;;AAED,MAAI,CAACD,MAAL,EAAa,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AAEb,SACI;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKA,MAAM,CAACU,GAAP,CAAWL,KAAK,IACb;AAAM,IAAA,GAAG,EAAEA,KAAK,CAACgB,EAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAI,IAAA,SAAS,EAAC,qBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAqChB,KAAK,CAACiB,IAA3C,CADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAOjB,KAAK,CAACkB,WAAb,CAFJ,CADJ,EAMKrB,KAAK,CAACsB,QAAN,KAAmBnB,KAAK,CAACgB,EAAzB,IACG,MAAC,KAAD;AAAO,IAAA,OAAO,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAyBnB,KAAK,CAACuB,OAA/B,CAPR,EAUI,MAAC,SAAD;AAAW,IAAA,SAAS,EAAC,oBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKpB,KAAK,CAACI,OAAN,CAAcC,GAAd,CAAkBO,MAAM,IACrB,MAAC,SAAD,CAAW,IAAX;AACI,IAAA,GAAG,EAAEA,MAAM,CAACI,EADhB;AAEI,IAAA,MAAM,EAAEJ,MAAM,CAACL,QAAP,KAAoB,IAFhC;AAGI,IAAA,SAAS,EAAC,mDAHd;AAII,IAAA,QAAQ,EAAEK,MAAM,CAACL,QAAP,KAAoB,IAJlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKK,MAAM,CAACK,IADZ,EAEI;AAAM,IAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAgCvB,QAAQ,CAACkB,MAAM,CAACS,KAAR,CAAxC,CAFJ,CANJ,EAWI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,MAAD;AAAQ,IAAA,SAAS,EAAC,0BAAlB;AAA6C,IAAA,OAAO,EAAE,MAAM;AACxDN,MAAAA,SAAS,CAACf,KAAD,EAAQY,MAAR,CAAT;AACH,KAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGI;AAAG,IAAA,SAAS,EAAC,qBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CADJ,EAMI;AAAK,IAAA,SAAS,EAAC,4DAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKA,MAAM,CAACH,QAAP,IAAmB,CADxB,CANJ,EASI,MAAC,MAAD;AACI,IAAA,SAAS,EAAC,2BADd;AAEI,IAAA,OAAO,EAAE,MAAM;AACXI,MAAAA,SAAS,CAACb,KAAD,EAAQY,MAAR,CAAT;AACH,KAJL;AAKI,IAAA,QAAQ,EAAEA,MAAM,CAACL,QAAP,KAAoB,IALlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOI;AAAG,IAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,CATJ,CADJ,CAXJ,CADH,CADL,CAVJ,CADH,CADL,CADJ;AAuDH","sourcesContent":["import { Button, ListGroup, Alert } from 'react-bootstrap';\n\nimport currency from '../../../../utils/currency';\n\nimport './styles.scss';\n\nexport default function({ groups, product, error, onChange }) {\n\n    function enableAndDisabeGroupOptions(group) {\n        const max = group.max;\n        const totalCountGroupQuantities = countGroupQuantities(group);\n\n        if (totalCountGroupQuantities >= max) {\n            group.options.map(op => op.disabled = false);\n            \n            group.options.filter(op => {\n                if (!op.quantity) op.quantity = 0;\n                if (op.quantity <= 0) {\n                    return op;\n                }\n            }).map(op => {\n                op.disabled = true;\n            });\n        } else {\n            group.options.map(op => op.disabled = false);\n        }\n    }\n\n    const countGroupQuantities = (group) => {\n        let countQuantities = 0;\n        group.options.filter(i => i.quantity > 0).map(option => {\n            countQuantities += option.quantity;\n        });\n\n        return countQuantities;\n    }\n\n    function increment(group, option) {\n        if (!option.quantity) option.quantity = 0;\n\n        const max = group.max;\n        const currentQuantity = option.quantity;\n        let quantity = option.quantity += 1;\n\n        const countQuantities = countGroupQuantities(group);\n\n        if (countQuantities > max) quantity = currentQuantity;\n\n        option.quantity = quantity;\n        \n        enableAndDisabeGroupOptions(group);\n        onChange(product);\n    }\n\n    function decrement(group, option) {\n        if (!option.quantity) option.quantity = 0;\n        option.quantity -= 1;\n\n        if (option.quantity <= 0) {\n            option.quantity = 0;\n        }\n\n        enableAndDisabeGroupOptions(group);\n        onChange(product);\n    }\n\n    if (!groups) return <div />;\n\n    return (\n        <div className=\"mt-4 groups\">\n            {groups.map(group =>\n                <div  key={group.id}>\n                    <div className=\"bg-light title pt-2 pb-2\">\n                        <h6 className=\"text-uppercase mb-0\">{group.name}</h6>\n                        <span>{group.description}</span>\n                    </div>\n                    \n                    {error.group_id === group.id && \n                        <Alert variant=\"danger\">{error.message}</Alert>\n                    }\n\n                    <ListGroup className=\"mb-4 group-options\">\n                        {group.options.map(option =>\n                            <ListGroup.Item \n                                key={option.id} \n                                active={option.disabled === true}\n                                className=\"d-flex justify-content-between align-items-center\"\n                                disabled={option.disabled === true}\n                            >\n                                <div>\n                                    {option.name}\n                                    <span className=\"text-muted\">+ {currency(option.price)}</span>\n                                </div>\n\n                                <div>\n                                    <div className=\"d-flex\">\n                                        <Button className=\"btn-quantity left btn-sm\" onClick={() => {\n                                            decrement(group, option);\n                                        }}>\n                                            <i className=\"fas fa-minus-circle\"></i>\n                                        </Button>\n                                        <div className=\"quantity btn btn-sm bg-light border-sm pl-3 pr-3 rounded-0\">\n                                            {option.quantity || 0}\n                                        </div>\n                                        <Button \n                                            className=\"btn-quantity right btn-sm\" \n                                            onClick={() => {\n                                                increment(group, option);\n                                            }}\n                                            disabled={option.disabled === true}\n                                        >\n                                            <i className=\"fas fa-plus-circle\"></i>\n                                        </Button>\n                                    </div>\n                                </div>\n                            </ListGroup.Item>\n                        )}\n                    </ListGroup>\n                </div>\n            )}\n        </div>\n    );\n    \n}"]},"metadata":{},"sourceType":"module"}