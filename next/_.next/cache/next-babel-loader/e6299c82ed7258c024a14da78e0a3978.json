{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport nextCookie from 'next-cookies';\nimport cookie from \"js-cookie\";\nimport * as cartActions from '../types/cart';\nimport * as authActions from '../types/auth';\nexport var authLogout = function authLogout() {\n  return function _callee(dispatch) {\n    var token, user;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            token = cookie.remove('token');\n            user = cookie.remove('user');\n            dispatch({\n              type: authActions.LOGOUT\n            });\n            dispatch({\n              type: cartActions.RESET_CART\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  };\n};\nexport var loginStorage = function loginStorage() {\n  return function _callee2(dispatch) {\n    var token, user;\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            token = cookie.get('token');\n            user = cookie.get('user');\n\n            if (user && token) {\n              dispatch({\n                type: authActions.SET_USER,\n                payload: JSON.parse(user)\n              });\n              dispatch({\n                type: authActions.SET_TOKEN,\n                payload: token\n              });\n            }\n\n            dispatch({\n              type: authActions.SET_LOADED,\n              payload: true\n            });\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  };\n};\nexport var setUser = function setUser(data) {\n  return function _callee3(dispatch) {\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (data.token) {\n              cookie.set('token', data.token);\n            }\n\n            cookie.set('user', _JSON$stringify(data.user));\n            dispatch({\n              type: authActions.SET_USER,\n              payload: data.user\n            });\n            dispatch({\n              type: authActions.SET_LOADED,\n              payload: true\n            });\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  };\n};\nexport var setUserData = function setUserData(data) {\n  return function _callee4(dispatch) {\n    return _regeneratorRuntime.async(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            cookie.set('user', _JSON$stringify(data));\n            dispatch({\n              type: authActions.SET_USER,\n              payload: data\n            });\n\n          case 2:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    });\n  };\n};\nexport var setToken = function setToken(token) {\n  return function _callee5(dispatch) {\n    return _regeneratorRuntime.async(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            cookie.set('token', token);\n            dispatch({\n              type: authActions.SET_TOKEN,\n              payload: token\n            });\n\n          case 2:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    });\n  };\n};\nexport var logout = function logout() {\n  return function _callee6(dispatch) {\n    return _regeneratorRuntime.async(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            cookie.remove('token');\n            cookie.remove('user');\n            dispatch({\n              type: authActions.LOGOUT\n            });\n\n          case 3:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    });\n  };\n};","map":null,"metadata":{},"sourceType":"module"}