{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Container, Table, Button, Spinner } from 'react-bootstrap';\nimport { useRouter } from 'next/router';\nimport PageTitle from '../../components/PageTitle';\nimport Breadcrumb from '../../components/Breadcrumb';\nimport Checkout from './Checkout';\nimport CartProductDetails from './Product/Details';\nimport currency from '../../utils/currency';\nimport { patch, httpDelete } from '../../services/http';\nimport { addCrumb, clearCrumbs } from '../../store/actions/breadcrumb';\nimport { loadCart } from '../../store/actions/cart';\n\nvar PageCart = function PageCart() {\n  var _useState = useState({}),\n      cartProductActive = _useState[0],\n      setCartProductActive = _useState[1];\n\n  var _useState2 = useState({}),\n      update = _useState2[0],\n      setUpdate = _useState2[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.cart;\n  }),\n      cart = _useSelector.cart;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.setting;\n  }),\n      setting = _useSelector2.setting,\n      loaded = _useSelector2.loaded;\n\n  var dispatch = useDispatch();\n  var router = useRouter();\n\n  var _useState3 = useState(false),\n      openCheckout = _useState3[0],\n      setOpenCheckout = _useState3[1];\n\n  useEffect(function () {\n    dispatch(clearCrumbs());\n    dispatch(addCrumb('Meu Carrinho'));\n  }, []);\n\n  function incrementQuantity(cartProduct) {\n    return _regeneratorRuntime.async(function incrementQuantity$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cartProduct.quantity += 1;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(patch(\"/cart/\".concat(cart.id, \"/product/\").concat(cartProduct.id), {\n              quantity: cartProduct.quantity\n            }));\n\n          case 3:\n            dispatch(loadCart());\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    });\n  }\n\n  function decrementQuantity(cartProduct) {\n    return _regeneratorRuntime.async(function decrementQuantity$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            cartProduct.quantity -= 1;\n\n            if (cartProduct.quantity <= 0) {\n              cartProduct.quantity = 1;\n            }\n\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(patch(\"/cart/\".concat(cart.id, \"/product/\").concat(cartProduct.id), {\n              quantity: cartProduct.quantity\n            }));\n\n          case 4:\n            dispatch(loadCart());\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    });\n  }\n\n  function deleteItem(cartProduct) {\n    return _regeneratorRuntime.async(function deleteItem$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(httpDelete(\"/cart/\".concat(cart.id, \"/product/\").concat(cartProduct.id)));\n\n          case 2:\n            dispatch(loadCart());\n\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  }\n\n  return __jsx(Container, null, __jsx(Breadcrumb, null), __jsx(PageTitle, {\n    title: \"Meu Carrinho\"\n  }), __jsx(Checkout, {\n    show: openCheckout && cart.products.length > 0,\n    onHide: function onHide() {\n      return setOpenCheckout();\n    }\n  }), __jsx(CartProductDetails, {\n    cartProduct: cartProductActive,\n    show: cartProductActive.id > 0,\n    onHide: function onHide() {\n      return setCartProductActive({});\n    },\n    onUpdate: function onUpdate(data) {\n      updateCartProduct(data);\n      setUpdate({\n        data: data\n      });\n    }\n  }), !cart.id && __jsx(Spinner, null), cart.id && __jsx(Table, {\n    striped: true,\n    bordered: true,\n    hover: true\n  }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"Produto\"), __jsx(\"th\", null, \"Pre\\xE7o\"), __jsx(\"th\", null, \"Quantidade\"), __jsx(\"th\", null, \"Total\"), __jsx(\"th\", null))), __jsx(\"tbody\", null, cart.products.map(function (cartProduct) {\n    return __jsx(\"tr\", {\n      key: cartProduct.id\n    }, __jsx(\"td\", null, cartProduct.product.name, cartProduct.option && cartProduct.option.name), __jsx(\"td\", null, currency(cartProduct.price_unity)), __jsx(\"td\", null, currency(cartProduct.total_price)), __jsx(\"td\", {\n      className: \"d-flex\"\n    }, __jsx(Button, {\n      className: \"btn-quantity left btn-sm\",\n      onClick: function onClick() {\n        decrementQuantity(cartProduct);\n      }\n    }, __jsx(\"i\", {\n      className: \"fas fa-minus-circle\"\n    })), __jsx(\"div\", {\n      className: \"quantity btn btn-sm bg-light border-sm pl-3 pr-3 rounded-0\"\n    }, cartProduct.quantity), __jsx(Button, {\n      className: \"btn-quantity right btn-sm\",\n      onClick: function onClick() {\n        incrementQuantity(cartProduct);\n      }\n    }, __jsx(\"i\", {\n      className: \"fas fa-plus-circle\"\n    }))), __jsx(\"td\", null, __jsx(Button, {\n      size: \"sm\",\n      onClick: function onClick() {\n        return setCartProductActive(cartProduct);\n      }\n    }, __jsx(\"i\", {\n      className: \"fas fa-eye\"\n    })), __jsx(Button, {\n      size: \"sm\",\n      variant: \"danger\",\n      className: \"ml-2\",\n      onClick: function onClick() {\n        return deleteItem(cartProduct);\n      }\n    }, __jsx(\"i\", {\n      className: \"fas fa-trash\"\n    }))));\n  }), __jsx(\"tr\", null, __jsx(\"td\", null), __jsx(\"td\", null), __jsx(\"td\", null), __jsx(\"td\", null), __jsx(\"td\", null, __jsx(\"strong\", null, \"Total:\"), currency(cart.total_price))))), __jsx(\"div\", {\n    className: \"mt-5 d-flex justify-content-between\"\n  }, __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"a\", {\n    className: \"btn btn-light\"\n  }, __jsx(\"i\", {\n    className: \"fas fa-chevron-left\"\n  }), \"Continuar Comprando\")), setting.store_status && setting.store_status.value !== \"0\" && __jsx(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: function onClick() {\n      return setOpenCheckout(true);\n    },\n    disabled: cart.products.length <= 0\n  }, \"Finalizar Pedido\", __jsx(\"i\", {\n    className: \"fas fa-chevron-right\"\n  }))));\n};\n\nexport default PageCart;","map":null,"metadata":{},"sourceType":"module"}