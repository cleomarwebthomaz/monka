{"ast":null,"code":"var _jsxFileName = \"/Users/webthomaz/Desktop/Desenvolvimento/m/monka/monka-api/next/pages/components/ProducItem/show.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Modal, Button, Image, ListGroup } from \"react-bootstrap\";\nimport { useState, useEffect } from \"react\";\nimport currency from \"../../../utils/currency\";\nexport default function (props) {\n  var show = props.show,\n      setShow = props.setShow,\n      product = props.product,\n      setting = props.setting;\n\n  var _useState = useState(props.product.quantity || 1),\n      quantity = _useState[0],\n      setQuantity = _useState[1];\n\n  var _useState2 = useState(props.product.price),\n      basePrice = _useState2[0],\n      setBasePrice = _useState2[1];\n\n  var _useState3 = useState(props.product.price),\n      totalPrice = _useState3[0],\n      setTotalPrice = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  useEffect(function () {\n    if (product.options) {\n      var selected = product.options.find(function (item) {\n        return item.selected;\n      });\n\n      if (!selected) {\n        product.options[0].selected = true;\n        setBasePrice(product.options[0].price);\n      }\n    }\n  }, []);\n\n  function updateProductPrices(base) {\n    var total = 0;\n\n    if (base) {\n      setBasePrice(base);\n    } else {\n      base = basePrice;\n    }\n\n    if (product.groups.length > 0) {\n      for (var i in product.groups) {\n        var group = product.groups[i];\n\n        for (var key in group.options) {\n          var option = group.options[key];\n\n          if (option.quantity > 0) {\n            var totalOptionPrice = option.price * option.quantity;\n            total = total += totalOptionPrice;\n          }\n        }\n      }\n    }\n\n    var totalPrice = (base + total) * quantity;\n    setTotalPrice(totalPrice);\n  }\n\n  var handleClose = function handleClose() {\n    setShow(false);\n  };\n\n  useEffect(function () {\n    updateProductPrices();\n  }, [quantity, basePrice, product]);\n\n  function incrementQuantity() {\n    var newQuantity = quantity;\n    newQuantity = newQuantity += 1;\n    setQuantity(newQuantity);\n  }\n\n  function decrementQuantity() {\n    var newQuantity = quantity;\n    newQuantity = newQuantity -= 1;\n    if (newQuantity <= 0) newQuantity = 1;\n    setQuantity(newQuantity);\n  }\n\n  return __jsx(React.Fragment, null, __jsx(Modal, {\n    show: show,\n    onHide: handleClose,\n    animation: false,\n    size: \"md\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, __jsx(Modal.Header, {\n    closeButton: true,\n    className: \"border-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }), __jsx(Modal.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, __jsx(Image, {\n    src: product.image_url,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }), __jsx(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, product.name), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, product.description), product.options && __jsx(ListGroup, {\n    className: \"options mt-4\",\n    horizontal: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, product.options.map(function (option) {\n    return __jsx(ListGroup.Item, {\n      key: option.id,\n      active: option.selected,\n      onClick: function onClick() {\n        product.options.map(function (op) {\n          return op.selected = false;\n        });\n        option.selected = true;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, option.name);\n  }))), __jsx(Modal.Footer, {\n    className: \"d-flex justify-content-between align-items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, __jsx(\"h5\", {\n    className: \"price text-white pt-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, currency(totalPrice))), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"d-flex\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, __jsx(Button, {\n    className: \"btn-quantity border-0 left btn-sm\",\n    onClick: decrementQuantity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"fas fa-minus-circle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"quantity btn btn-sm border-sm pl-3 pr-3 rounded-0 text-white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, quantity || 1), __jsx(Button, {\n    className: \"btn-quantity border-0 right btn-sm\",\n    onClick: incrementQuantity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"fas fa-plus-circle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  })), setting.store_status.value === \"1\" && __jsx(Button, {\n    className: \"btn-quantity right btn-md ml-3 border-0 text-uppercase\",\n    disabled: loading,\n    onClick: function onClick() {\n      return addCart();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"fas fa-shopping-cart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }), \" Comprar\", loading && __jsx(Spinner, {\n    animation: \"border\",\n    role: \"status\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    className: \"sr-only\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, \"Loading...\"))))))));\n}","map":{"version":3,"sources":["/Users/webthomaz/Desktop/Desenvolvimento/m/monka/monka-api/next/pages/components/ProducItem/show.js"],"names":["Modal","Button","Image","ListGroup","useState","useEffect","currency","props","show","setShow","product","setting","quantity","setQuantity","price","basePrice","setBasePrice","totalPrice","setTotalPrice","loading","setLoading","options","selected","find","item","updateProductPrices","base","total","groups","length","i","group","key","option","totalOptionPrice","handleClose","incrementQuantity","newQuantity","decrementQuantity","image_url","name","description","map","id","op","store_status","value","addCart"],"mappings":"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","sourcesContent":["import { Modal, Button, Image, ListGroup } from \"react-bootstrap\";\nimport { useState, useEffect } from \"react\";\nimport currency from \"../../../utils/currency\";\n\nexport default function(props) {\n    const {show, setShow, product, setting } = props;\n    const [quantity, setQuantity] = useState(props.product.quantity || 1);\n    const [basePrice, setBasePrice] = useState(props.product.price);\n    const [totalPrice, setTotalPrice] = useState(props.product.price);\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        if (product.options) {\n            const selected = product.options.find(item => item.selected);\n\n            if (!selected) {\n                product.options[0].selected = true;\n                setBasePrice(product.options[0].price);\n            }\n        }\n\n    }, []);\n\n    function updateProductPrices(base) {\n        let total = 0;\n        \n        if (base) {\n            setBasePrice(base);\n        } else {\n            base = basePrice;\n        }\n\n        if (product.groups.length > 0) {\n            for (let i in product.groups) {\n                const group = product.groups[i];\n                for (let key in group.options) {\n                    const option = group.options[key];\n                    if (option.quantity > 0) {\n                        const totalOptionPrice = option.price * option.quantity;\n                        total = total += totalOptionPrice;\n                    }\n                }\n            }\n        }\n\n        const totalPrice = (base + total) * quantity ;\n        \n        setTotalPrice(totalPrice);\n    }\n\n    const handleClose = () => {\n        setShow(false);\n    }\n\n    useEffect(() => {\n        updateProductPrices();\n    }, [quantity, basePrice, product]);\n\n    function incrementQuantity() {\n        let newQuantity = quantity;\n        newQuantity = newQuantity += 1;\n        setQuantity(newQuantity);\n    }\n    \n    function decrementQuantity() {\n        let newQuantity = quantity;\n        newQuantity = newQuantity -= 1;\n        if (newQuantity <= 0) newQuantity = 1;\n        setQuantity(newQuantity);\n    }\n\n    return (\n        <>\n       <Modal show={show} onHide={handleClose} animation={false} size=\"md\">\n        <Modal.Header closeButton className=\"border-0\" />\n\n        <Modal.Body>\n            <Image src={product.image_url} />\n\n            <h3>{product.name}</h3>\n            <p>{product.description}</p>\n\n            {product.options && \n                <ListGroup className=\"options mt-4\" horizontal>\n                    {product.options.map(option =>\n                        <ListGroup.Item \n                            key={option.id} \n                            active={option.selected}\n                            onClick={() => {\n                                product.options.map(op => op.selected = false);\n                                option.selected = true;\n                            }}\n                        >\n                            {option.name}\n                        </ListGroup.Item>\n                    )}\n                </ListGroup>\n            }\n\n\n        </Modal.Body>\n\n        <Modal.Footer className=\"d-flex justify-content-between align-items-center\">\n            <div>\n                <h5 className=\"price text-white pt-1\">{currency(totalPrice)}</h5>\n            </div>\n\n            <div>\n                <div></div>\n\n                <div className=\"d-flex\">\n                    <Button className=\"btn-quantity border-0 left btn-sm\" onClick={decrementQuantity}>\n                        <i className=\"fas fa-minus-circle\"></i>\n                    </Button>\n                    <div className=\"quantity btn btn-sm border-sm pl-3 pr-3 rounded-0 text-white\">\n                        {quantity || 1}\n                    </div>\n                    <Button className=\"btn-quantity border-0 right btn-sm\" onClick={incrementQuantity}>\n                        <i className=\"fas fa-plus-circle\"></i>\n                    </Button>\n\n                    {setting.store_status.value === \"1\" &&\n                        <Button className=\"btn-quantity right btn-md ml-3 border-0 text-uppercase\" disabled={loading} onClick={() => addCart()}>\n                            <i className=\"fas fa-shopping-cart\"></i> Comprar\n\n                            {loading &&\n                                <Spinner animation=\"border\" role=\"status\">\n                                    <span className=\"sr-only\">Loading...</span>\n                                </Spinner>\n                            }\n\n                        </Button>\n                    }\n                </div>\n            </div>\n        </Modal.Footer>\n      </Modal>   \n\n      </>     \n    );\n    \n}\n  \n"]},"metadata":{},"sourceType":"module"}