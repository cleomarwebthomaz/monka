{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar _jsxFileName = \"/Users/webthomaz/Desktop/Desenvolvimento/m/monka/nps/monka-api/next/pages/order/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { useSelector } from 'react-redux';\nimport { Table, Spinner, Alert } from 'react-bootstrap';\nimport Layout from '../../components/Layouts/Customer';\nimport { get } from '../../services/http';\nimport currency from '../../utils/currency';\nimport pusher from '../../services/pusher';\nimport Page from '../../components/Page';\n\nvar Order = function Order() {\n  var _useState = useState([]),\n      orders = _useState[0],\n      setOrders = _useState[1];\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useSelector = useSelector(function (state) {\n    return state.auth;\n  }),\n      user = _useSelector.user;\n\n  useEffect(function () {\n    function getData() {\n      var result;\n      return _regeneratorRuntime.async(function getData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(get('/order'));\n\n            case 2:\n              result = _context.sent;\n              setOrders(result);\n              setLoading(false);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n\n    pusher.bind(\"orderStatus-\".concat(user.id), function (data) {\n      getData();\n    });\n    getData();\n  }, []);\n  var pageTitle = 'Meus Pedidos';\n  var crumbs = [{\n    name: pageTitle\n  }];\n  return __jsx(Page, {\n    title: pageTitle,\n    crumbs: crumbs,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, __jsx(Layout, {\n    pageTitle: pageTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, loading && __jsx(Spinner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }), !loading && orders.lenght <= 0 && __jsx(Alert, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, \"Sem Registros\"), !loading && __jsx(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    responsive: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, __jsx(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, __jsx(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, __jsx(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"Pedido\"), __jsx(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \"Status\"), __jsx(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, \"Produtos\"), __jsx(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, \"Total\"), __jsx(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }))), __jsx(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, orders.map(function (order) {\n    return __jsx(\"tr\", {\n      key: order.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, __jsx(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, order.id), __jsx(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, order.state.name), __jsx(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, order.cart.__meta__.products_count), __jsx(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, currency(order.total_price)), __jsx(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, __jsx(Link, {\n      href: \"/order/\".concat(order.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      className: \"btn btn-primary btn-sm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, __jsx(\"i\", {\n      className: \"fas fa-eye\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    })))));\n  }))), __jsx(\"div\", {\n    className: \"mt-5 d-flex justify-content-between\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    className: \"btn btn-light\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"fas fa-chevron-left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), \"Continuar Comprando\")), __jsx(Link, {\n    href: \"/account\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    className: \"btn btn-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Minha Conta\", __jsx(\"i\", {\n    className: \"fas fa-chevron-right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }))))));\n};\n\nexport default Order;","map":{"version":3,"sources":["/Users/webthomaz/Desktop/Desenvolvimento/m/monka/nps/monka-api/next/pages/order/index.js"],"names":["useEffect","useState","Link","useSelector","Table","Spinner","Alert","Layout","get","currency","pusher","Page","Order","orders","setOrders","loading","setLoading","state","auth","user","getData","result","bind","id","data","pageTitle","crumbs","name","lenght","map","order","cart","__meta__","products_count","total_price"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { useSelector } from 'react-redux';\nimport { Table, Spinner, Alert } from 'react-bootstrap';\n\nimport Layout from '../../components/Layouts/Customer';\n\nimport { get } from '../../services/http';\nimport currency from '../../utils/currency';\nimport pusher from '../../services/pusher';\nimport Page from '../../components/Page';\n\nconst Order = () => {\n    const [orders, setOrders] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    const { user } = useSelector(state => state.auth);\n\n    useEffect(() => {\n      async function getData() {\n          const result = await get('/order');\n          setOrders(result);\n          setLoading(false);\n      }\n\n      pusher.bind(`orderStatus-${user.id}`, function(data) {\n          getData();\n      });\n    \n      getData();\n    }, []);\n\n    const pageTitle = 'Meus Pedidos';\n\n    const crumbs = [\n      { name: pageTitle },\n    ];\n\n    return (\n      <Page title={pageTitle} crumbs={crumbs}>\n        <Layout pageTitle={pageTitle}>\n\n            {loading && <Spinner /> }\n            {!loading && orders.lenght <= 0 && <Alert>Sem Registros</Alert>}\n\n            {!loading &&\n              <Table striped bordered hover responsive>\n                <thead>\n                  <tr>\n                    <th>Pedido</th>\n                    <th>Status</th>\n                    <th>Produtos</th>\n                    <th>Total</th>\n                    <th></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {orders.map(order =>\n                    <tr key={order.id}>\n                      <td>{order.id}</td>\n                      <td>{order.state.name}</td>\n                      <td>{order.cart.__meta__.products_count}</td>\n                      <td>{currency(order.total_price)}</td>\n                      <td>\n                          <Link href={`/order/${order.id}`}>\n                            <a className=\"btn btn-primary btn-sm\">\n                                <i className=\"fas fa-eye\"></i> \n                            </a>\n                          </Link>\n                      </td>\n                    </tr>\n                  )}\n                </tbody>\n              </Table>\n            }\n\n            <div className=\"mt-5 d-flex justify-content-between\">\n              <Link href=\"/\">\n                <a className=\"btn btn-light\">\n                  <i className=\"fas fa-chevron-left\"></i> \n                  Continuar Comprando  \n                </a>\n              </Link>\n\n              <Link href=\"/account\">\n                <a className=\"btn btn-primary\">\n                    Minha Conta\n                    <i className=\"fas fa-chevron-right\"></i> \n                </a>\n              </Link>\n            </div>\n        </Layout>\n      </Page>\n    );\n\n}\n\nexport default Order;\n"]},"metadata":{},"sourceType":"module"}