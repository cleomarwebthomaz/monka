{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { Button, ListGroup, Alert } from 'react-bootstrap';\nimport currency from '../../../../utils/currency';\nexport default function ({\n  groups,\n  product,\n  error,\n  onChange\n}) {\n  function enableAndDisabeGroupOptions(group) {\n    const max = group.max;\n    const totalCountGroupQuantities = countGroupQuantities(group);\n\n    if (totalCountGroupQuantities >= max) {\n      group.options.map(op => op.disabled = false);\n      group.options.filter(op => {\n        if (!op.quantity) op.quantity = 0;\n\n        if (op.quantity <= 0) {\n          return op;\n        }\n      }).map(op => {\n        op.disabled = true;\n      });\n    } else {\n      group.options.map(op => op.disabled = false);\n    }\n  }\n\n  const countGroupQuantities = group => {\n    let countQuantities = 0;\n    group.options.filter(i => i.quantity > 0).map(option => {\n      countQuantities += option.quantity;\n    });\n    return countQuantities;\n  };\n\n  function increment(group, option) {\n    if (!option.quantity) option.quantity = 0;\n    const max = group.max;\n    const currentQuantity = option.quantity;\n    let quantity = option.quantity += 1;\n    const countQuantities = countGroupQuantities(group);\n    if (countQuantities > max) quantity = currentQuantity;\n    option.quantity = quantity;\n    enableAndDisabeGroupOptions(group);\n    onChange(product);\n  }\n\n  function decrement(group, option) {\n    if (!option.quantity) option.quantity = 0;\n    option.quantity -= 1;\n\n    if (option.quantity <= 0) {\n      option.quantity = 0;\n    }\n\n    enableAndDisabeGroupOptions(group);\n    onChange(product);\n  }\n\n  if (!groups) return __jsx(\"div\", null);\n  return __jsx(\"div\", {\n    className: \"groups\"\n  }, groups.map(group => __jsx(\"div\", {\n    key: group.id\n  }, __jsx(\"div\", {\n    className: \"bg-light title pt-2 pb-2\"\n  }, __jsx(\"strong\", {\n    className: \"text-uppercase mb-0\"\n  }, group.name), __jsx(\"br\", null), __jsx(\"span\", null, group.description)), error.group_id === group.id && __jsx(Alert, {\n    variant: \"danger\"\n  }, error.message), __jsx(ListGroup, {\n    className: \"group-options\"\n  }, group.options.map(option => __jsx(ListGroup.Item, {\n    key: option.id,\n    active: option.disabled === true,\n    className: \"d-flex justify-content-between align-items-center\",\n    disabled: option.disabled === true\n  }, __jsx(\"div\", null, option.name, __jsx(\"span\", {\n    className: \"text-muted\"\n  }, \"+ \", currency(option.price))), __jsx(\"div\", null, __jsx(\"div\", {\n    className: \"d-flex\"\n  }, __jsx(Button, {\n    className: \"btn-quantity left btn-sm\",\n    onClick: () => {\n      decrement(group, option);\n    }\n  }, __jsx(\"i\", {\n    className: \"fas fa-minus-circle\"\n  })), __jsx(\"div\", {\n    className: \"quantity btn btn-sm bg-light border-sm pl-3 pr-3 rounded-0\"\n  }, option.quantity || 0), __jsx(Button, {\n    className: \"btn-quantity right btn-sm\",\n    onClick: () => {\n      increment(group, option);\n    },\n    disabled: option.disabled === true\n  }, __jsx(\"i\", {\n    className: \"fas fa-plus-circle\"\n  }))))))))));\n}","map":null,"metadata":{},"sourceType":"module"}