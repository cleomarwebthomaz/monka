{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar _jsxFileName = \"/Users/webthomaz/Desktop/Desenvolvimento/m/monka/monka-api/next/components/Cart/Voucher/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect } from 'react';\nimport { withFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { ButtonGroup, ListGroup, Form, Spinner, Row, Col, Image, Card, Button, InputGroup } from 'react-bootstrap';\nimport { useDispatch } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport { get, post, patch, httpDelete } from '../../../services/http';\nimport { loadCart } from '../../../store/actions/cart';\n\nfunction VoucherForm(props) {\n  var dispatch = useDispatch();\n  useEffect(function () {\n    if (props.status && props.status.success) {\n      dispatch(loadCart());\n      toast.success('Cupom aplicado com sucesso', {\n        position: toast.POSITION.BOTTOM_CENTER\n      });\n    }\n  }, [props.status]);\n  return __jsx(Form, {\n    className: \"pl-3 pr-3\",\n    onSubmit: props.handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, __jsx(Form.Group, {\n    className: \"mt-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  }, __jsx(InputGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, __jsx(Form.Control, {\n    value: props.values.code,\n    onChange: function onChange(e) {\n      return props.setFieldValue('code', e.target.value);\n    },\n    placeholder: \"Cupom\",\n    className: \"border-0 shadow\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }), __jsx(InputGroup.Prepend, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, __jsx(Button, {\n    variant: \"primary\",\n    type: \"submit\",\n    disabled: props.isSubmitting,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, \"OK\", props.isSubmitting && __jsx(Spinner, {\n    animation: \"border\",\n    role: \"status\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  })))), props.touched.code && props.errors.code && __jsx(Form.Control.Feedback, {\n    type: \"invalid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, props.errors.code)));\n}\n\nexport default withFormik({\n  mapPropsToValues: function mapPropsToValues(props) {\n    return {\n      code: ''\n    };\n  },\n  validationSchema: Yup.object().shape({\n    code: Yup.string().required('Informe o código do cupom')\n  }),\n  handleSubmit: function handleSubmit(values, _ref) {\n    var setSubmitting, setErrors, setStatus, result;\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setSubmitting = _ref.setSubmitting, setErrors = _ref.setErrors, setStatus = _ref.setStatus;\n            _context.prev = 1;\n            setSubmitting(true);\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(post(\"/cart/add-voucher\", values));\n\n          case 5:\n            result = _context.sent;\n\n            if (result.success) {\n              setStatus({\n                success: true,\n                data: result\n              });\n            } else {\n              setErrors({\n                code: result.error\n              });\n            }\n\n            _context.next = 12;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](1);\n            setErrors({\n              error: 'N!ao foi possível válidar o cupom'\n            });\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 9]]);\n  }\n})(VoucherForm);","map":{"version":3,"sources":["/Users/webthomaz/Desktop/Desenvolvimento/m/monka/monka-api/next/components/Cart/Voucher/index.js"],"names":["useEffect","withFormik","Yup","ButtonGroup","ListGroup","Form","Spinner","Row","Col","Image","Card","Button","InputGroup","useDispatch","toast","get","post","patch","httpDelete","loadCart","VoucherForm","props","dispatch","status","success","position","POSITION","BOTTOM_CENTER","handleSubmit","values","code","e","setFieldValue","target","value","isSubmitting","touched","errors","mapPropsToValues","validationSchema","object","shape","string","required","setSubmitting","setErrors","setStatus","result","data","error"],"mappings":"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","sourcesContent":["import { useEffect } from 'react';\nimport { withFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { ButtonGroup, ListGroup, Form, Spinner, Row, Col, Image, Card, Button, InputGroup } from 'react-bootstrap';\nimport { useDispatch } from 'react-redux';\nimport { toast } from 'react-toastify';\n\nimport { get, post, patch, httpDelete } from '../../../services/http';\nimport { loadCart } from '../../../store/actions/cart';\n\nfunction VoucherForm(props) {\n    const dispatch = useDispatch();\n    \n    useEffect(() => {\n        if (props.status && props.status.success) {\n            dispatch(loadCart());\n\n            toast.success('Cupom aplicado com sucesso', {\n                position: toast.POSITION.BOTTOM_CENTER\n            });\n        }\n    }, [props.status]);\n\n    return (\n        <Form className=\"pl-3 pr-3\" onSubmit={props.handleSubmit}>\n\n            <Form.Group className=\"mt-4\">\n                <InputGroup>\n                    <Form.Control \n                        value={props.values.code}\n                        onChange={e => props.setFieldValue('code', e.target.value)}\n                        placeholder=\"Cupom\"\n                        className=\"border-0 shadow\"\n                    />\n                    <InputGroup.Prepend>\n                        <Button variant=\"primary\" type=\"submit\" disabled={props.isSubmitting}>\n                            OK\n                            {props.isSubmitting && \n                                <Spinner animation=\"border\" role=\"status\" />\n                            }\n                        </Button>\n                    </InputGroup.Prepend>\n                </InputGroup>\n\n                {props.touched.code && props.errors.code && \n                    <Form.Control.Feedback type=\"invalid\">{props.errors.code}</Form.Control.Feedback>\n                }\n            </Form.Group>\n        \n        </Form>\n    )\n\n}\n\nexport default withFormik({\n  mapPropsToValues: props => ({ \n      code: '',\n    }),\n\n  validationSchema: Yup.object().shape({\n    code: Yup.string().required('Informe o código do cupom'),\n  }),\n\n  handleSubmit: async (values, { setSubmitting, setErrors, setStatus }) => {\n      try {\n        setSubmitting(true);\n\n        const result = await post(`/cart/add-voucher`, values);\n\n        if (result.success) {\n            setStatus({ success: true, data: result });\n        } else {\n            setErrors({ code: result.error });\n        }\n\n      } catch(error) {\n          setErrors({ error: 'N!ao foi possível válidar o cupom' });\n      }\n  },\n\n})(VoucherForm);\n\n"]},"metadata":{},"sourceType":"module"}